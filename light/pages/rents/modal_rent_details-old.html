<!-- page -->
<div id="view_modal_rent_details" class="view_modal">
    <div class="modal_backdrop"></div>
    <div class="modal_dialog modal_lg">
        <div class="modal_content position-relative">
            
            <!--loading -->
            <div id="modal_rent_details_content_loading" class="view_loading" style="display: none;">
                <img src="/assets/images/icons/loading.svg" />
            </div>

            <div class="modal_header">
                <ul class="modal_ul nav nav-tabs">
                    <li>
                        <a data-toggle="tab" href="#modal_body_details" class="active"><i class="fas fa-home" onclick="modal_details_rent.bl.load_data(modal_details_rent.rent_id)"></i></a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#modal_body_price_per_day"><i class="far fa-calendar-check"></i></a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#modal_body_guests_list" onclick="modal_details_rent.ui.load_invoices_list(); modal_details_rent.ui.load_guests();" id="modal_body_guests_list_tab"><i class="fas fa-users"></i></a>
                    </li>
                    <li class="hidden">
                        <a data-toggle="tab" href="#modal_body_edit_guest" id="modal_body_edit_guest_tab"><i class="fas fa-user-edit"></i></a>
                    </li>
                    <li class="hidden">
                        <a data-toggle="tab" href="#modal_body_add_guest" id="modal_body_add_guest_tab"><i class="fas fa-user-plus"></i></a>
                    </li>
                    <li class="hidden">
                        <a data-toggle="tab" href="#modal_body_bills" onclick="modal_details_rent.ui.load_invoices_list();" id="modal_rent_details_bills"><i class="fas fa-file-alt"></i></a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#modal_body_credit_card"><i class="far fa-credit-card"></i></a>
                    </li>
                    <li><a data-toggle="tab" href="#modal_body_messages" onclick="modal_details_rent.ui.load_emails();"><i class="far fa-envelope"></i></a></li>

                    <li class="hidden">
                        <a data-toggle="tab" href="#modal_body_option"><i class="far fa-calendar-plus"></i></a>
                    </li>
                    <li class="hidden">
                        <a data-toggle="tab" href="#modal_body_add_payment"><i class="fas fa-money-bill-alt" onclick="modal_details_rent.ui.load_payment_recive();"></i></a>
                    </li>
                    <li class="hidden">
                        <a data-toggle="tab" href="#modal_body_add_key"><i class="fas fa-key"></i></a>
                    </li>
                    <li class="hidden">
                        <a data-toggle="tab" href="#modal_body_chat" onclick="modal_details_rent.ui.load_messages();"><i class="far fa-comments"></i></a>
                    </li>
                </ul>
                <div class="close" data-dismiss="modal" id="modal_rent_details_close_modal" onclick="view_modal_rent_details.parentElement.classList.add('hidden');"><i class="fas fa-times"></i></div>
            </div>
            <div class="modal_wrapper">
                <div class="tab-content">
                    <div id="modal_body_details" class="tab-pane active">
                        <div class="modal-body">
                            <!-- Info -->
                            <div class="row">
                                <div class="col-lg-4 pb-2">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-6">
                                            <!-- Icon -->
                                            <div class="d-flex pb-2">
                                                <div class="modal_icon">
                                                    <img src="./assets/images/icons/portals/airbnb.svg" alt="" id="modal_rent_details_image">
                                                </div>
                                                <div>
                                                    <div class="modal_id" id="modal_rent_details_rent_id">456456</div>
                                                    <div class="modal_created" id="modal_created_id">20.11.2020</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-6">
                                            <!-- Calendar -->
                                            <div class="modal_period btn_hover position-relative d-flex align-items-center justify-content-between" ;>
                                                <div class="d-flex align-items-center">
                                                    <div class="pr-2">
                                                        <i class="far fa-calendar-alt pr-2"></i>
                                                    </div>
                                                    <div>
                                                        <div id="modal_rent_details_rent_date_from">03.11.20</div>
                                                        <div id="modal_rent_details_rent_date_until">09.11.20</div>
                                                    </div>
                                                </div>
                                                <div class="modal_dropdown_menu_calendar hidden">
                                                    <div id="rent_details_calendar"></div>
                                                </div>
                                                <div class="font_1"><i class="fas fa-chevron-down"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Advance & Total -->
                                    <div class="d-flex pl-2 pb-2 pt-1 justify-content-between">
                                        <div class="text-center w-50">
                                            <div class="modal_label text-left">
                                                <div class="font_bold font_3">Advance</div>
                                                <div class="d-flex">
                                                    <div id="modal_rent_details_in_advance_1"></div>
                                                    <div class="pl-2" id="modal_rent_detail_in_advance_1_currency">€</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal_line_y"></div>
                                        <div class="text-center w-50">
                                            <div class="modal_label text-left">
                                                <div class="font_bold font_3">Total</div>
                                                <div class="d-flex">
                                                    <div id="modal_rent_details_price"></div>
                                                    <div class="pl-2" id="modal_rent_details_price_currency">€</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Guest -->
                                <div class="col-lg-4 pb-2">
                                    <div class="guest">
                                        <div class="small_title">Guest</div>
                                        <hr class="my-2">
                                        <div class="guest_p d-flex align-items-center pb-2">
                                            <i class="fas fa-user px-2"></i>
                                            <input type="text" class="inside_input" value="Janmik Wilder" id="modal_rent_details_contact_name">
                                        </div>
                                        <div class="guest_p d-flex align-items-center pb-2">
                                            <i class="fas fa-phone px-2"></i>
                                            <input type="text" class="inside_input" value="+385 0004545" id="modal_rent_details_contact_tel">
                                        </div>
                                        <div class="guest_p d-flex align-items-center pb-2">
                                            <i class="fas fa-envelope px-2"></i>
                                            <input type="text" class="inside_input" value="example@example.com" id="modal_rent_details_contact_email">
                                        </div>
                                        <div class="guest_p d-flex pb-1">
                                            <!-- Country -->
                                            <div id="modal_filter_country" class="view_dropdown dropdown dropdown_sm w-100" data-id="" data-name="">
                                                <button class="btn btn_hover pl-2 pr-2 py-1 w-100">
                                                    <div class="d-flex align-items-center w-100">
                                                        <span class="mr-2 font_4 d-flex "><i class="fas fa-globe-europe"></i></span>
                                                        <div class="dropdown_label mr-1">
                                                            <div class="font_4 dropdown_name white">
                                                                <span class="flag pr-1">
                                                                    <img src="./assets/images/icons/flags/at.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Austria</span>
                                                            </div>
                                                        </div>
                                                        <div class="btn_toogleArrow pl-2 ml-auto font_1">
                                                            <i class="fas fa-chevron-down"></i>
                                                        </div>
                                                    </div>
                                                </button>
                                                <div class="dropdown_menu w-100 hidden">
                                                    <div class="d-flex justify-content-between pt-3 px-3 pb-2">
                                                        <div class="font_bold">Country</div>
                                                        <div class="dropdown_close">
                                                            <i class="fas fa-times"></i>
                                                        </div>
                                                    </div>
                                                    <div class="dropdown_search px-3 pt-1 pb-2">
                                                        <input type="text" class="form-control" placeholder="Search">
                                                    </div>
                                                    <hr class="m-0">
                                                    <ul class="dropdown_ul ul_icon_white font_3"
                                                        style="max-height: 15rem; overflow-y: auto;" id="modal_rent_details_countries_list">
                                                        <!--<li class="dropdown_li" data-country="1">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/at.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Austria</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="2">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/cz.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Czech Republic</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="3">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/fr.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>France</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="4">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/se.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Sweden</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="5">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/hr.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Croatia</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="6">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/de.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Germany</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="7">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/us.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>America</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="8">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/ro.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Romania</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="9">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/au.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Australia</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="10">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/ba.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Bosnia & Herzegovina</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="11">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/ar.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Argetina</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li" data-country="11">
                                                            <div class="d-flex align-items-center">
                                                                <span class="flag pr-2">
                                                                    <img src="./assets/images/icons/flags/si.svg"
                                                                         alt="">
                                                                </span>
                                                                <span>Slovenia</span>
                                                            </div>
                                                        </li>-->
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 pb-2">
                                    <div class="d-flex justify-content-between pb-0">
                                        <div class="small_title">Price</div>
                                        <div id="modal_rent_details_select_curr" class="select_curr">
                                            <button id="modal_rent_details_currency">EUR</button>
                                            <ul class="font_4 hidden" onclick="modal_details_rent.bl.load_data(modal_details_rent.rent_id)">
                                                <li>EUR</li>
                                                <li>HRK</li>
                                                <li>USD</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <hr class="my-2">
                                    <div class="d-flex justify-content-between border-bottom pb-2">
                                        <div class="w-50">Items</div>
                                        <div>100</div>
                                    </div>
                                    <div class="d-flex justify-content-between pb-2">
                                        <div class="space_nowrap pr-3">By person</div>
                                        <div class="position-relative">
                                            <input type="text" class="inside_input text-right" value="100" id="modal_rent_details_by_person">
                                            <!--<span class="">€</span>-->
                                        </div>

                                    </div>
                                    <div class="d-flex justify-content-between border-bottom pb-2">
                                        <div class="space_nowrap pr-2">By day</div>
                                        <div class="position-relative">
                                            <input type="text" class="inside_input text-right" value="100" id="modal_rent_details_by_day">
                                            <!--<span class="">€</span>-->
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between pb-2">
                                        <div class="pr-2">Exchange</div>
                                        <div>
                                            <input type="text" class="inside_input text-right" value="7.45" id="modal_rent_details_exchange">
                                        </div>
                                    </div>

                                    <!-- <label class="pb-0 mb-0"
                                        class="checkbox check_label m-0 d-flex justify-content-between align-items-center"><span class="text-uppercase font_medium">Plaćeno</span>
                                        <input type="checkbox">
                                        <span class="check pt-0 check_xl"></span>
                                    </label>
                                    <hr class="mb-2 mt-1">
                                    <div class="modal_value title px-2">
                                        <div>U</div>
                                        <div class="d-flex">
                                            <input type="text" class="ml-2 inside_input text-right" value="999,00">
                                            <span class="pl-2">
                                                <span id="modal_rent_details_select_curr" class="select_curr">
                                                    <button>EUR</button>
                                                    <ul class="font_4 hidden">
                                                        <li>EUR</li>
                                                        <li>HRK</li>
                                                        <li>USD</li>
                                                    </ul>
                                                </span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="modal_value px-2">
                                        <div>Tečaj</div>
                                        <input type="text" class="ml-2 inside_input text-right" value="7,54">
                                    </div>
                                    <div class="modal_value px-2">
                                        <div>Kuna</div>
                                        <div>1.000,00 Kn</div>
                                    </div> -->
                                </div>
                                <div class="col-12 border-bottom border-top">
                                    <div class="row py-2">
                                        <div class="col-md-6 border-right">
                                            <div class="modal_guests d-flex flex-wrap pl-2">
                                                <div class="d-flex align-items-center">
                                                    <input type="text" class="inside_input text-right" value="2" id="modal_rent_details_rent_adults" style="width: 1.5rem !important">
                                                    <!--<span id="modal_rent_details_rent_adults">2</span>-->
                                                    <i class="fas fa-user pl-2"></i>
                                                </div>
                                                <div class="modal_line_y"></div>
                                                <div class="d-flex align-items-center">
                                                    <input type="text" class="inside_input text-right" value="2" id="modal_rent_details_rent_children" style="width: 1.5rem !important">
                                                    <!--<span id="modal_rent_details_rent_children">2</span>-->
                                                    <i class="fas fa-child pl-2"></i>
                                                </div>
                                                <div class="modal_line_y"></div>
                                                <div class="d-flex align-items-center">
                                                    <input type="text" class="inside_input text-right" value="2" id="modal_rent_details_rent_pets" style="width: 1.5rem !important">
                                                    <!-- <span id="modal_rent_details_rent_pets">2</span>-->
                                                    <i class="fas fa-paw pl-2"></i>
                                                </div>
                                                <div class="modal_line_y"></div>
                                                <div class="d-flex align-items-center" id="modal_rent_details_parking">
                                                    <i class="fas fa-parking"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div id="modal_filter_object"
                                                 class="view_dropdown dropdown dropdown_sm object w-100" data-id="">
                                                <button class="btn btn_hover pl-2 pr-2 py-1 w-100">
                                                    <div class="d-flex align-items-center w-100">
                                                        <span class="mr-2 font_4 d-flex"><i class="fas fa-home"></i></span>
                                                        <div class="dropdown_label mr-1">
                                                            <div class="font_4 dropdown_name">
                                                                <div class="d-flex align-items-center text-left">
                                                                    <div class="icon bg_green"></div>
                                                                    <span>Apartment</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="btn_toogleArrow pl-2 ml-auto font_1">
                                                            <i class="fas fa-chevron-down"></i>
                                                        </div>
                                                    </div>
                                                </button>
                                                <div class="dropdown_menu w-100 hidden">
                                                    <div class="d-flex justify-content-between pt-3 px-3 pb-2">
                                                        <div class="font_bold">Object</div>
                                                        <div class="dropdown_close">
                                                            <i class="fas fa-times"></i>
                                                        </div>
                                                    </div>
                                                    <div class="dropdown_search px-3 pt-1 pb-2">
                                                        <input type="text" class="form-control" placeholder="Search">
                                                    </div>
                                                    <hr class="m-0">
                                                    <ul class="dropdown_ul" style="max-height: 15rem; overflow-y: auto;" id="modal_rent_details_object_list">
                                                        <li class="dropdown_li taken" value="0">
                                                            <div class="d-flex align-items-center text-left">
                                                                <div class="icon bg_green"></div>
                                                                <span>Apartment</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li busy" value="1">
                                                            <div class="d-flex align-items-center text-left">
                                                                <div class="icon bg_red"></div>
                                                                <span>Apartment 02</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li free" value="2">
                                                            <div class="d-flex align-items-center text-left">
                                                                <div class="icon"></div>
                                                                <span>Apartment with balcony/view</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li free" value="3">
                                                            <div class="d-flex align-items-center text-left">
                                                                <div class="icon"></div>
                                                                <span>Apartment with balcony/view too long</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li free" value="4">
                                                            <div class="d-flex align-items-center text-left">
                                                                <div class="icon"></div>
                                                                <span>Apartment</span>
                                                            </div>
                                                        </li>
                                                        <li class="dropdown_li free" value="5">
                                                            <div class="d-flex align-items-center text-left">
                                                                <div class="icon"></div>
                                                                <span>Apartment</span>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                    <hr class="m-0">
                                                    <div class="dropdown_footer d-flex">
                                                        <div class="dropdown_btn btn_all w-100 text-center font_3">All</div>
                                                        <div class="dropdown_btn btn_free w-100 text-center font_3">
                                                            Free
                                                        </div>
                                                        <div class="dropdown_btn btn_taken w-100 text-center font_3">
                                                            Taken
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Dropdowns -->
                            <div class="row py-2">
                                <div class="col-md-4">
                                    <!-- Source -->
                                    <div id="modal_source" class="view_dropdown dropdown" data-id="">
                                        <button class="btn btn_hover px-2 py-1 w-100">
                                            <div class="d-flex align-items-center w-100">
                                                <span class="mr-3 font_8 d-flex py-2"><i class="fas fa-book"></i></span>
                                                <div class="dropdown_label mr-1">
                                                    <div class="font_1 text-uppercase font_bold text-left pb-1">
                                                        Source
                                                    </div>
                                                    <div class="font_3 dropdown_name white text-left">-</div>
                                                </div>
                                                <div class="btn_toogleArrow pl-2 ml-auto font_1">
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                            </div>
                                        </button>
                                        <div class="dropdown_menu w-100 hidden">
                                            <div class="d-flex justify-content-between pt-3 px-3 pb-2">
                                                <div class="font_bold">Source</div>
                                                <div class="dropdown_close"><i class="fas fa-times"></i></div>
                                            </div>
                                            <hr class="m-0">
                                            <ul class="dropdown_ul dropdown_icon ul_icon_white font_3" id="modal_rent_details_rent_source_dropdown"
                                                style="max-height: 15rem; overflow-y: auto;">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 border-right border-left">

                                    <!-- Status -->
                                    <div id="modal_status" class="view_dropdown dropdown" data-id="">
                                        <button type="button" class="btn btn_hover px-2 py-1 w-100">
                                            <div class="d-flex align-items-center w-100">
                                                <span class="mr-3 font_8 d-flex py-2">
                                                    <i class="fas fa-layer-group"></i>
                                                </span>
                                                <div class="dropdown_label mr-1">
                                                    <div class="font_1 text-uppercase font_bold text-left pb-1">
                                                        Status
                                                    </div>
                                                    <div class="font_3 dropdown_name text-left" data-id="">-</div>
                                                </div>
                                                <div class="btn_toogleArrow pl-2 ml-auto font_1">
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                            </div>
                                        </button>
                                        <div class="dropdown_menu w-100 hidden">
                                            <div class="d-flex justify-content-between pt-3 px-3 pb-2">
                                                <div class="font_bold">Status</div>
                                                <div class="dropdown_close"><i class="fas fa-times"></i></div>
                                            </div>
                                            <hr class="m-0">
                                            <ul class="dropdown_ul ul_icon_white font_3"
                                                style="max-height: 15rem; overflow-y: auto;" id="modal_rent_details_rent_status">
                                                <li class="dropdown_li" data-status="1">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #DDDDDD;"></div>
                                                        <div class="name align-self-center" data-id="">Owner</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="2">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #414f6e;"></div>
                                                        <div class="name align-self-center">Paid</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="3">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #389b7a;"></div>
                                                        <div class="name align-self-center">Check OUT</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="4">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #337e61;"></div>
                                                        <div class="name align-self-center">ADV payed</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="5">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #287533;"></div>
                                                        <div class="name align-self-center">Guest confirmed</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="6">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #942121;"></div>
                                                        <div class="name align-self-center">Blocked</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="7">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #6ae488;"></div>
                                                        <div class="name align-self-center">Confirm</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="8">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #c255b3;"></div>
                                                        <div class="name align-self-center">ORVAS VHC</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="9">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #c27e3f;"></div>
                                                        <div class="name align-self-center">Waiting</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="10">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #4dc4e2;"></div>
                                                        <div class="name align-self-center">Check IN</div>
                                                    </div>
                                                </li>
                                                <li class="dropdown_li" data-status="11">
                                                    <div class="d-flex align-items-center">
                                                        <div class="icon" style="background-color: #f0ee94;"></div>
                                                        <div class="name align-self-center">Offer</div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <!-- Paid -->
                                    <div id="modal_paid" class="view_dropdown dropdown" data-id="">
                                        <button type="button" class="btn btn_hover px-2 py-1 w-100">
                                            <div class="d-flex align-items-center w-100">
                                                <span class="mr-3 font_8 d-flex py-2">
                                                    <i class="fas fa-hand-holding-usd"></i>
                                                </span>
                                                <div class="dropdown_label mr-1">
                                                    <div class="font_1 text-uppercase font_bold text-left pb-1">
                                                        Payment
                                                    </div>
                                                    <div class="font_3 dropdown_name text-left">-</div>
                                                </div>
                                                <div class="btn_toogleArrow pl-2 ml-auto font_1">
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                            </div>
                                        </button>
                                        <div class="dropdown_menu w-100 hidden">
                                            <div class="d-flex justify-content-between pt-3 px-3 pb-2">
                                                <div class="font_bold">Payment</div>
                                                <div class="dropdown_close"><i class="fas fa-times"></i></div>
                                            </div>
                                            <hr class="m-0">
                                            <ul class="dropdown_ul font_3" style="max-height: 15rem; overflow-y: auto;" id="modal_rent_details_payment_method_type">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Tabs -->
                            <div class="modal_tabs pt-2 border-top">
                                <ul class="nav nav-tabs tab_pills_04">
                                    <li>
                                        <a data-toggle="tab" href="#modal_tabs_note" class="active">
                                            <i class="far fa-clipboard pr-2"></i><span>Note</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a data-toggle="tab" href="#modal_tabs_price">
                                            <i class="fas fa-coins pr-2"></i><span>Price</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a data-toggle="tab" href="#modal_tabs_owner">
                                            <i class="fas fa-user pr-2"></i><span>Owner</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a data-toggle="tab" href="#modal_tabs_short">
                                            <i class="far fa-sticky-note pr-2"></i><span>Short</span>
                                        </a>
                                    </li>
                                </ul>
                                <div class="tab-content px-2 pt-2">
                                    <div id="modal_tabs_note" class="tab-pane active">
                                        <textarea id="modal_rent_details_tabs_note" cols="30" rows="7" class="form-control focus"
                                                  placeholder="Text here..."></textarea>
                                    </div>
                                    <div id="modal_tabs_price" class="tab-pane">
                                        <textarea id="modal_rent_details_tabs_price_note" cols="30" rows="7" class="form-control focus"
                                                  placeholder="Price text here..."></textarea>
                                    </div>
                                    <div id="modal_tabs_owner" class="tab-pane">
                                        <textarea id="modal_rent_details_tabs_note_owner" cols="30" rows="7" class="form-control focus"
                                                  placeholder="Owner text here..."></textarea>
                                    </div>
                                    <div id="modal_tabs_short" class="tab-pane">
                                        <textarea id="modal_rent_details_tabs_short_note" cols="30" rows="7" class="form-control focus"
                                                  placeholder="Short text here..."></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- test calendar -->

                        </div>

                        <!--  buttons for saving-->
                        <div class="modal-footer justify-content-between">
                            <div class="m-0">
                                <button type="button" class="btn btn_red m-1" onclick="modal_details_rent.bl.delete_reservation();">Delete</button>
                                <button type="button" class="btn btn_primary m-1" onclick="location.href = '#bills'">
                                    <i class="fas fa-file-alt pr-2"></i>Invoice
                                </button>
                                <button type="button" class="btn btn_primary">
                                    <i class="fas fa-sign-in-alt pr-2"></i>Check in
                                </button>
                                <!--<button type="button" class="btn btn_primary" onclick="ui.content_loading('modal_rent_details_content_loading')">
                                    <i class="fas fa-vial"></i>
                                </button>-->
                                <a class="btn btn_primary text-white" href="" target="_blank" id="guest_portal_btn">
                                    <i class="fas fa-sign-in-alt pr-2"></i>Guest portal
                                </a>
                            </div>
                            <div class="m-0">

                                <button type="button" class="btn btn_primary m-1" onclick="modal_details_rent.bl.save_rent();">
                                    <i class="fas fa-save pr-2"></i>Save
                                </button>
                            </div>
                        </div>
                    </div> <div id="modal_body_guests_list" class="tab-pane">
                        <div class="modal-body pb-0">
                            <div id="bills" class="modal_body_bill">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="font_6 font_bold"><i class="fas fa-file-alt pr-2"></i>Lists of guests</div>
                                    <button class="btn btn_primary" onclick="document.querySelector('#modal_body_add_guest_tab').click(); modal_details_rent.bl.load_date_add_guest_tab(); modal_details_rent.ui.load_guests();"><i class="fas fa-plus"></i></button>
                                </div>
                                <div class="bill-invoices-table pt-3">
                                    <div class="overflow-auto">
                                        <table class="table table-bill m-0" style="min-width: 500px;">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Name</th>
                                                    <th>Years</th>
                                                    <th>Days</th>
                                                    <th>Price</th>
                                                    <th class="text-right">Sync</th>
                                                </tr>
                                            </thead>
                                            <tbody id="modal_rent_details_guest_tbody">
                                                <tr class="tr-bill">
                                                    <td style="max-width: 2rem;">
                                                        <img src="./assets/images/icons/flags/AL.svg" height="20" alt="">
                                                    </td>
                                                    <td>Domagoj Krmpotic</td>
                                                    <td>25</td>
                                                    <td>6 days</td>
                                                    <td>120 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox" checked>
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td style="max-width: 2rem;">
                                                        <img src="./assets/images/icons/flags/AL.svg" height="20" alt="">
                                                    </td>
                                                    <td>Domagoj Krmpotic</td>
                                                    <td>25</td>
                                                    <td>6 days</td>
                                                    <td>120 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox" checked>
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td style="max-width: 2rem;">
                                                        <img src="./assets/images/icons/flags/AL.svg" height="20" alt="">
                                                    </td>
                                                    <td>Domagoj Krmpotic</td>
                                                    <td>25</td>
                                                    <td>6 days</td>
                                                    <td>120 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox" checked>
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td style="max-width: 2rem;">
                                                        <img src="./assets/images/icons/flags/AL.svg" height="20" alt="">
                                                    </td>
                                                    <td>Domagoj Krmpotic</td>
                                                    <td>25</td>
                                                    <td>6 days</td>
                                                    <td>120 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox" checked>
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td style="max-width: 2rem;">
                                                        <img src="./assets/images/icons/flags/AL.svg" height="20" alt="">
                                                    </td>
                                                    <td>Domagoj Krmpotic</td>
                                                    <td>25</td>
                                                    <td>6 days</td>
                                                    <td>120 € </td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox" checked>
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="text-right">
                                <!--<button type="button" class="btn btn_primary" data-dismiss="modal">
                                    <i class="fas fa-save pr-2"></i>Save
                                </button>-->
                            </div>
                        </div>
                    </div>
                    <div id="modal_body_bills" class="tab-pane">
                        <div class="modal-body">
                            <div id="bills" class="modal_body_bill">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="font_6 font_bold"><i class="fas fa-file-alt pr-2"></i>Bills</div>
                                    <button class="btn btn_primary"><i class="fas fa-plus"></i></button>
                                </div>
                                <div class="bill-invoices-table pt-3">
                                    <div class="overflow-auto">
                                        <table class="table table-bill m-0" style="min-width: 500px;">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>No.</th>
                                                    <th>Type</th>
                                                    <th>Price</th>
                                                    <th class="text-right">Payment</th>
                                                </tr>
                                            </thead>
                                            <tbody id="modal_rent_details_invoices_tbody">
                                                <tr class="tr-bill">
                                                    <td>01.07.2020</td>
                                                    <td>6-2020</td>
                                                    <td>Račun</td>
                                                    <td>400,00 € / 3.000,00 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox" checked>
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td>01.07.2020</td>
                                                    <td>6-2020</td>
                                                    <td>Račun</td>
                                                    <td>400,00 € / 3.000,00 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox">
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td>01.07.2020</td>
                                                    <td>6-2020</td>
                                                    <td>Račun</td>
                                                    <td>400,00 € / 3.000,00 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox">
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td>01.07.2020</td>
                                                    <td>6-2020</td>
                                                    <td>Račun</td>
                                                    <td>400,00 € / 3.000,00 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox" checked>
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr class="tr-bill">
                                                    <td>01.07.2020</td>
                                                    <td>6-2020</td>
                                                    <td>Račun</td>
                                                    <td>400,00 € / 3.000,00 €</td>
                                                    <td class="text-right">
                                                        <label onclick="modal_details_rent.ui.tr_success(this)"
                                                               class="checkbox">
                                                            <input type="checkbox">
                                                            <span class="check check_xl"></span>
                                                        </label>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="text-right">
                                <button type="button" class="btn btn_primary" data-dismiss="modal">
                                    <i class="fas fa-save pr-2"></i>Save
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="modal_body_credit_card" class="tab-pane">
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="font_6 font_bold pb-2">
                                        <i class="far fa-credit-card pr-2"></i>Insert card

                                    </div>
                                    <div class="modal_credit_card">
                                        <div class="modal_credit_card_item01 border">
                                            <div class="text-uppercase font_3 font_medium pb-2">
                                                Unesite Vaš PIN
                                            </div>
                                            <div class="form-group input_remove_number_arrow">
                                                <input type="number" class="form-control focus" placeholder="PIN1">
                                            </div>
                                            <div class="form-group input_remove_number_arrow">
                                                <input type="number" class="form-control focus" placeholder="PIN2">
                                            </div>
                                            <button class="btn btn_primary w-100">Prikaži</button>
                                        </div>
                                        <div class="modal_credit_card_item02 w-100 border">
                                            <div class="form-group">
                                                <input type="text" class="form-control focus" placeholder="Type">
                                            </div>
                                            <div class="form-group input_remove_number_arrow">
                                                <input type="number" class="form-control focus" placeholder="Broj kartice">
                                            </div>
                                            <div class="expires d-flex flex-wrap align-items-center">
                                                <div class="form-group d-flex input_remove_number_arrow">
                                                    <input type="number" class="form-control focus mr-2"
                                                           placeholder="Od"><span class="mt-1">/</span><input type="number" class="form-control focus ml-2" placeholder="Do">
                                                </div>
                                                <div class="form-group w-100 input_remove_number_arrow">
                                                    <input type="number" class="form-control focus" placeholder="CVV">
                                                </div>
                                            </div>
                                            <div class="form-group m-0">
                                                <input type="text" class="form-control focus" placeholder="Ime i Prezime">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 modal_credit_card_access pt-md-0 pt-3">
                                    <div class="font_6 font_bold pb-2">
                                        <i class="fas fa-user-check pr-2"></i>Login
                                        pristupa
                                    </div>
                                    <div><span class="font_2 mr-1">01.01.2020</span>Neven Palčec</div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn_silver">Reset</button>
                            <button type="button" class="btn btn_primary" data-dismiss="modal">
                                <i class="fas fa-save pr-2"></i>Save
                            </button>
                        </div>
                    </div>
                    <div id="modal_body_messages" class="tab-pane">
                        <div class="modal-body">
                            <div class="pb-2 d-flex justify-content-between">
                                <div class="font_6 font_bold pb-2">Sent emails</div>
                                <div class="d-flex">

                                    <div id="modal_mail_send" class="view_dropdown toggle ml-auto mr-2">
                                        <button class="btn btn_primary">
                                            <div class="d-flex align-items-center">
                                                <span class="font_4"><i class="fas fa-file-alt pr-2"></i> Confirmation</span>
                                                <span class="font_1 ml-2"><i class="fas fa-chevron-down"></i></span>
                                            </div>
                                        </button>
                                        <div class="dropdown_menu hidden w-100" style="right: 0;">
                                            <ul class="dropdown_ul font_3 dropdown_ul_max_height">
                                                <li class="dropdown_li">
                                                    <a class="dropdown_a" onclick="modal_details_rent.bl.send_confirmation_mail();">Send</a>
                                                </li>
                                                <li class="dropdown_li">
                                                    <a href="/rents/email/" target="_blank" class="dropdown_a" id="modal_rent_details_confirmation_preview">Preview</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div id="modal_mail_send_voucher" class="view_dropdown toggle ml-auto mr-2">
                                        <button class="btn btn_primary">
                                            <div class="d-flex align-items-center">
                                                <span class="font_4"><i class="fas fa-file-alt pr-2"></i> Voucher</span>
                                                <span class="font_1 ml-2"><i class="fas fa-chevron-down"></i></span>
                                            </div>
                                        </button>
                                        <div class="dropdown_menu hidden w-100" style="right: 0;">
                                            <ul class="dropdown_ul font_3 dropdown_ul_max_height">
                                                <li class="dropdown_li">
                                                    <a class="dropdown_a" onclick="modal_details_rent.bl.send_voucher_mail();">Send</a>
                                                </li>
                                                <li class="dropdown_li">
                                                    <a href="" class="dropdown_a" target="_blank" id="modal_rent_details_voucher_preview">Preview</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div id="modal_mail_send_offer" class="view_dropdown toggle ml-auto mr-2">
                                        <button class="btn btn_primary">
                                            <div class="d-flex align-items-center">
                                                <span class="font_4"><i class="fas fa-file-alt pr-2"></i> Offer</span>
                                                <span class="font_1 ml-2"><i class="fas fa-chevron-down"></i></span>
                                            </div>
                                        </button>
                                        <div class="dropdown_menu hidden w-100" style="right: 0;">
                                            <ul class="dropdown_ul font_3 dropdown_ul_max_height">
                                                <li class="dropdown_li">
                                                    <a class="dropdown_a" onclick="modal_details_rent.bl.send_offer_mail();">Send</a>
                                                </li>
                                                <li class="dropdown_li">
                                                    <a href="#" class="dropdown_a" target="_blank" id="modal_rent_details_offer_preview">Preview</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                            </div>


                            <table class="table mt-2">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Date</th>
                                        <th>Time</th>
                                        <th class="text-right">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="modal_body_messages_tbody_id">
                                    <tr>
                                        <td>Test</td>
                                        <td>07.07.2020.</td>
                                        <td class="text-right text-success"><i class="fas fa-check"></i></td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="modal_message_info">
                                <i class="fas fa-circle pr-2"></i>Rezervacija primljena
                                u 01.07.2020 - 11:50
                            </div>
                        </div>
                    </div>
                    <!-- tab for add guests-->
                    <div id="modal_body_add_guest" class="tab-pane">
                        <div class="modal-body">
                            <div class="d-flex justify-content-between">
                                <div class="font_6 font_bold pb-0"><i class="fas fa-user-plus"></i> Add guest</div>
                                <div class="font_6 font_bold pr-5">Existing guest</div>
                            </div>
                            <hr />
                            <div class="row">
                                <div class="col-sm-8">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="mb-1">Date from:</label>
                                                <input type="date" class="form-control focus" id="modal_add_guest_details_date_from" required>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="mb-1">Date until:</label>
                                                <input type="date" class="form-control focus" id="modal_add_guest_details_date_until" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">First name</label>
                                                <input type="text" class="form-control focus" id="modal_add_guest_details_first_name" onkeyup="modal_details_rent.ui.search_first_10();">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Last name</label>
                                                <input type="text" class="form-control focus" id="modal_add_guest_details_last_name" onkeyup="modal_details_rent.ui.search_first_10();">
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">City</label>
                                                <input type="text" class="form-control focus" id="modal_add_guest_details_city">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Country</label>
                                                <div id="modal_add_guest_details_select_country" class="select">
                                                    <button class="custom-select focus" id="modal_add_guest_details_country" data-code1=""></button>
                                                    <i class="fas fa-angle-down"></i>
                                                    <ul class="select_ul hidden" id="modal_add_guest_details_countries_ul">
                                                        <!--adding countries via template-->
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Date birth</label>
                                                <input type="text" class="form-control focus" id="modal_add_guest_details_date_birth">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Gender</label>
                                                <div class="d-flex flex-wrap mt-1">
                                                    <div class="custom_radio radio_lg mr-4">
                                                        <label for="modal_add_guest_details_sex_type_M">
                                                            Male
                                                            <input type="radio" id="modal_add_guest_details_sex_type_M" checked="checked" name="add_guest_details_sex_radio">
                                                            <span></span>
                                                        </label>
                                                    </div>
                                                    <div class="custom_radio radio_lg">
                                                        <label for="modal_add_guest_details_sex_type_F">
                                                            Female
                                                            <input type="radio" id="modal_add_guest_details_sex_type_F" name="add_guest_details_sex_radio">
                                                            <span></span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Type of document</label>
                                                <div id="modal_add_guest_details_select_type_of_document" class="select">
                                                    <button class="custom-select focus" id="modal_add_guest_details_country_btn"></button>
                                                    <i class="fas fa-angle-down"></i>
                                                    <ul class="select_ul hidden" id="modal_add_guest_details_type_of_document_ul">
                                                        <li class="select_li" data-id="002"> Osobna putovnica (strana) </li>
                                                        <li class="select_li" data-id="027"> Osobna iskaznica (strana) </li>
                                                        <li class="select_li" data-id="032"> Vozačka dozvola (strana) </li>
                                                        <li class="select_li" data-id="051"> Osobna iskaznica (domaća) </li>
                                                        <li class="select_li" data-id="028"> Osobna putovnica (domaća) </li>
                                                        <li class="select_li" data-id="999"> Zdrastvena iskaznica </li>
                                                        <li class="select_li" data-id="037"> Službena putovnica (domaća) </li>
                                                        <li class="select_li" data-id="033"> Dječja putovnica (domaća)) </li>
                                                        <li class="select_li" data-id="103"> Vozačka dozvola (domaća) </li>
                                                        <li class="select_li" data-id="004"> Zajednička putovnica (strana) </li>
                                                        <li class="select_li" data-id="003"> Obiteljska putovnica (strana) </li>
                                                        <li class="select_li" data-id="005"> Dječja putovnica (strana) </li>
                                                        <li class="select_li" data-id="006"> Diplomatska putovnica (strana) </li>
                                                        <li class="select_li" data-id="007"> Službena putovnica (strana) </li>
                                                        <li class="select_li" data-id="008"> Pomorska knjižica (strana) </li>
                                                        <li class="select_li" data-id="009"> Brodarska knjižica (strana) </li>
                                                        <li class="select_li" data-id="011"> Putni list za strance - izdan od RH </li>
                                                        <li class="select_li" data-id="012"> Putna isprava za izbjeglice </li>
                                                        <li class="select_li" data-id="013"> Putna isprava za osobe bez državljanstva </li>
                                                        <li class="select_li" data-id="022"> Potvrda o oduzimanju ili zadržavanju putne isprave </li>
                                                        <li class="select_li" data-id="023"> Potvrda o prijavi gubitka ili nestanka putne isprave </li>
                                                        <li class="select_li" data-id="024"> Osobna iskaznica za stranca - izdana od RH </li>
                                                        <li class="select_li" data-id="025"> Posebna osobna iskaznica - diplomatska konzularna službena </li>
                                                        <li class="select_li" data-id="026"> Isprave izdane na temelju međ. ugovora </li>
                                                        <li class="select_li" data-id="029"> Pogranična propusnica (strana) </li>
                                                        <li class="select_li" data-id="030"> Izbjeglički karton izdan od RH </li>
                                                        <li class="select_li" data-id="034"> Putni list za strance (strani) </li>
                                                        <li class="select_li" data-id="039"> Ostalo </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Document number</label>
                                                <input type="text" class="form-control focus" id="modal_add_guest_details_document_number" onkeyup="modal_details_rent.ui.search_first_10();">
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Place of residence</label>
                                                <input type="text" class="form-control focus" value="" id="modal_add_guest_details_place_of_residence">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Country of residence</label>
                                                <div id="modal_add_guest_details_select_country_of_birth" class="select">
                                                    <button class="custom-select focus" id="modal_add_guest_details_select_country_btn" data-code1=""></button>
                                                    <i class="fas fa-angle-down"></i>
                                                    <ul class="select_ul hidden" id="modal_add_guest_details_select_country_of_residence_ul">
                                                        <li class="select_li" data-id="1"><span><img src="./assets/images/icons/flags/ad.svg" alt=""></span>Example</li>
                                                        <li class="select_li" data-id="2"><span><img src="./assets/images/icons/flags/at.svg" alt=""></span>Austria</li>
                                                        <li class="select_li" data-id="3">
                                                            <span><img src="./assets/images/icons/flags/es.svg" alt=""></span>Spain
                                                        </li>
                                                        <li class="select_li" data-id="4"><span><img src="./assets/images/icons/flags/fi.svg" alt=""></span>Finska</li>
                                                        <li class="select_li" data-id="5"><span><img src="./assets/images/icons/flags/fr.svg" alt=""></span>France</li>
                                                        <li class="select_li" data-id="6"><span><img src="./assets/images/icons/flags/hr.svg" alt=""></span>Croatia</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="mb-1">Citizenship</label>
                                                <div id="modal_add_guest_details_select_citizenship" class="select">
                                                    <button class="custom-select focus" id="modal_add_guest_details_select_citizenship_btn"></button>
                                                    <i class="fas fa-angle-down"></i>
                                                    <ul class="select_ul hidden" id="modal_add_guest_details_select_citizenship_ul">
                                                        <li class="select_li" data-id="1"><span><img src="./assets/images/icons/flags/ad.svg" alt=""></span>Example</li>
                                                        <li class="select_li" data-id="2"><span><img src="./assets/images/icons/flags/at.svg" alt=""></span>Austria</li>
                                                        <li class="select_li" data-id="3">
                                                            <span><img src="./assets/images/icons/flags/es.svg" alt=""></span>Spain
                                                        </li>
                                                        <li class="select_li" data-id="4"><span><img src="./assets/images/icons/flags/fi.svg" alt=""></span>Finska</li>
                                                        <li class="select_li" data-id="5"><span><img src="./assets/images/icons/flags/fr.svg" alt=""></span>France</li>
                                                        <li class="select_li" data-id="6"><span><img src="./assets/images/icons/flags/hr.svg" alt=""></span>Croatia</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">

                                    <div id="modal_rent_details_existing_guest_div">
                                        <!--<div>
                                            <div>
                                                <img src="./assets/images/icons/flags/HR.svg" height="15" alt="">
                                                <span>Domagoj Krmpotic</span>
                                            </div>
                                            <div>
                                                <span>Doc. No. </span>
                                                <span class="border-left mx-2 border-dark"></span>
                                                <span>12312312</span>
                                            </div>
                                        </div>
                                        <hr />
                                        <div>
                                            <div>
                                                <img src="./assets/images/icons/flags/HR.svg" height="15" alt="">
                                                <span>Domagoj Krmpotic</span>
                                            </div>
                                            <div>
                                                <span>Doc. No. </span>
                                                <span class="border-left mx-2 border-dark"></span>
                                                <span>12312312</span>
                                            </div>
                                        </div>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer justify-content-between">
                            <div class="m-0">
                                <button class="btn btn_silver m-1" data-dismiss="modal">Close</button>
                                <button class="btn btn_primary m-1" onclick="document.querySelector('#modal_body_guests_list_tab').click();modal_details_rent.bl.clear_add_guest();">Back</button>
                            </div>
                            <button class="btn btn_primary m-1" onclick="modal_details_rent.bl.add_guest();"><i class="fas fa-plus pr-2"></i>Add</button>
                        </div>
                    </div>
                    <!-- tab for edit guest-->
                    <div id="modal_body_edit_guest" class="tab-pane">
                        <div class="modal-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="font_6 font_bold mb-2"><i class="fas fa-user-edit pr-2"></i>Edit guest</div>
                                <div>
                                    <div class="d-flex align-content-center">
                                        <!--<div id="modal_rent_details_evisitor_checkin" class="bg-success px-2 py-1 text-white mr-2 rounded">P</div>
                                        <div id="modal_rent_details_evisitor_verified" class="bg-success px-2 py-1 text-white rounded">V</div>-->

                                        <div class="mr-2 mt-1 hidden" id="modal_rent_details_evisitor_icon"><img src="/assets/images/icons/icon-evisitor.svg" alt="Evisitor" style="width:1.5rem; height:1.5rem" /> </div>
                                        <button class="btn btn_primary" onclick="modal_details_rent.bl.add_guest_to_evisitor();">Add to evisitor</button>

                                    </div>
                                </div>
                            </div>
                            <hr class="my-1" />
                            <div class="row">
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Date from:</label>
                                        <input type="date" class="form-control focus" id="modal_edit_guest_details_date_from">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Date until:</label>
                                        <input type="date" class="form-control focus" id="modal_edit_guest_details_date_until">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Option</label>
                                        <input type="text" class="form-control focus" id="modal_edit_guest_details_option">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">First name</label>
                                        <input type="text" class="form-control focus" id="modal_edit_guest_details_first_name">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Last name</label>
                                        <input type="text" class="form-control focus" id="modal_edit_guest_details_last_name">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Gender</label>
                                        <div class="d-flex flex-wrap mt-1">
                                            <div class="custom_radio radio_lg mr-4">
                                                <label for="modal_edit_guest_details_sex_type_M">
                                                    Male
                                                    <input type="radio" id="modal_edit_guest_details_sex_type_M" checked="checked" name="add_guest_details_sex_radio">
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="custom_radio radio_lg">
                                                <label for="modal_edit_guest_details_sex_type_F">
                                                    Female
                                                    <input type="radio" id="modal_edit_guest_details_sex_type_F" name="add_guest_details_sex_radio">
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Type of document</label>
                                        <div id="modal_edit_guest_details_select_type_of_document" class="select">
                                            <button class="custom-select focus" id="modal_edit_guest_details_type_of_document_btn"></button>
                                            <i class="fas fa-angle-down"></i>
                                            <ul class="select_ul hidden" id="modal_edit_guest_details_type_of_document_ul">
                                                <li class="select_li" data-id="002"> Osobna putovnica (strana) </li>
                                                <li class="select_li" data-id="027"> Osobna iskaznica (strana) </li>
                                                <li class="select_li" data-id="032"> Vozačka dozvola (strana) </li>
                                                <li class="select_li" data-id="051"> Osobna iskaznica (domaća) </li>
                                                <li class="select_li" data-id="028"> Osobna putovnica (domaća) </li>
                                                <li class="select_li" data-id="999"> Zdrastvena iskaznica </li>
                                                <li class="select_li" data-id="037"> Službena putovnica (domaća) </li>
                                                <li class="select_li" data-id="033"> Dječja putovnica (domaća)) </li>
                                                <li class="select_li" data-id="103"> Vozačka dozvola (domaća) </li>
                                                <li class="select_li" data-id="004"> Zajednička putovnica (strana) </li>
                                                <li class="select_li" data-id="003"> Obiteljska putovnica (strana) </li>
                                                <li class="select_li" data-id="005"> Dječja putovnica (strana) </li>
                                                <li class="select_li" data-id="006"> Diplomatska putovnica (strana) </li>
                                                <li class="select_li" data-id="007"> Službena putovnica (strana) </li>
                                                <li class="select_li" data-id="008"> Pomorska knjižica (strana) </li>
                                                <li class="select_li" data-id="009"> Brodarska knjižica (strana) </li>
                                                <li class="select_li" data-id="011"> Putni list za strance - izdan od RH </li>
                                                <li class="select_li" data-id="012"> Putna isprava za izbjeglice </li>
                                                <li class="select_li" data-id="013"> Putna isprava za osobe bez državljanstva </li>
                                                <li class="select_li" data-id="022"> Potvrda o oduzimanju ili zadržavanju putne isprave </li>
                                                <li class="select_li" data-id="023"> Potvrda o prijavi gubitka ili nestanka putne isprave </li>
                                                <li class="select_li" data-id="024"> Osobna iskaznica za stranca - izdana od RH </li>
                                                <li class="select_li" data-id="025"> Posebna osobna iskaznica - diplomatska konzularna službena </li>
                                                <li class="select_li" data-id="026"> Isprave izdane na temelju međ. ugovora </li>
                                                <li class="select_li" data-id="029"> Pogranična propusnica (strana) </li>
                                                <li class="select_li" data-id="030"> Izbjeglički karton izdan od RH </li>
                                                <li class="select_li" data-id="034"> Putni list za strance (strani) </li>
                                                <li class="select_li" data-id="039"> Ostalo </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-3">
                                    <div class="form-group">
                                        <label class="mb-1">Document number</label>
                                        <input type="text" class="form-control focus" id="modal_edit_guest_details_document_number">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-3">
                                    <div class="form-group">
                                        <label class="mb-1">Expiration date</label>
                                        <input type="text" class="form-control focus" id="modal_edit_guest_details_expiration_date">
                                    </div>
                                </div>

                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Citizenship</label>
                                        <div id="modal_edit_guest_details_select_citizenship" class="select">
                                            <button class="custom-select focus" id="modal_edit_guest_details_select_citizenship_btn"></button>
                                            <i class="fas fa-angle-down"></i>
                                            <ul class="select_ul hidden" id="modal_edit_guest_details_select_citizenship_ul">
                                                <!--<li class="select_li" data-id="1"><span><img src="./assets/images/icons/flags/ad.svg" alt=""></span>Example</li>
                                                <li class="select_li" data-id="2"><span><img src="./assets/images/icons/flags/at.svg" alt=""></span>Austria</li>
                                                <li class="select_li" data-id="3">
                                                    <span><img src="./assets/images/icons/flags/es.svg" alt=""></span>Spain
                                                </li>
                                                <li class="select_li" data-id="4"><span><img src="./assets/images/icons/flags/fi.svg" alt=""></span>Finska</li>
                                                <li class="select_li" data-id="5"><span><img src="./assets/images/icons/flags/fr.svg" alt=""></span>France</li>
                                                <li class="select_li" data-id="6"><span><img src="./assets/images/icons/flags/hr.svg" alt=""></span>Croatia</li>-->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">City</label>
                                        <input type="text" class="form-control focus" id="modal_edit_guest_details_city">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Country</label>
                                        <div id="modal_edit_guest_details_select_country" class="select">
                                            <button class="custom-select focus" id="modal_edit_guest_details_country" data-code1=""></button>
                                            <i class="fas fa-angle-down"></i>
                                            <ul class="select_ul hidden" id="modal_edit_guest_details_countries_ul">
                                                <!--adding countries via template-->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Place of residence</label>
                                        <input type="text" class="form-control focus" value="" id="modal_edit_guest_details_place_of_residence">
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Country of residence</label>
                                        <div id="modal_edit_guest_details_select_country_of_birth" class="select">
                                            <button class="custom-select focus" id="modal_edit_guest_details_select_country_btn" data-code1=""></button>
                                            <i class="fas fa-angle-down"></i>
                                            <ul class="select_ul hidden" id="modal_edit_guest_details_select_country_of_residence_ul">
                                                <li class="select_li" data-id="1"><span><img src="./assets/images/icons/flags/ad.svg" alt=""></span>Example</li>
                                                <li class="select_li" data-id="2"><span><img src="./assets/images/icons/flags/at.svg" alt=""></span>Austria</li>
                                                <li class="select_li" data-id="3">
                                                    <span><img src="./assets/images/icons/flags/es.svg" alt=""></span>Spain
                                                </li>
                                                <li class="select_li" data-id="4"><span><img src="./assets/images/icons/flags/fi.svg" alt=""></span>Finska</li>
                                                <li class="select_li" data-id="5"><span><img src="./assets/images/icons/flags/fr.svg" alt=""></span>France</li>
                                                <li class="select_li" data-id="6"><span><img src="./assets/images/icons/flags/hr.svg" alt=""></span>Croatia</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-6">
                                    <div class="form-group">
                                        <label class="mb-1">Date birth</label>
                                        <input type="text" class="form-control focus" id="modal_edit_guest_details_date_birth">
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="mb-1">Description</label>
                                        <textarea name="description" id="modal_edit_guest_details_note" class="form-control focus" cols="30" rows="5"></textarea>
                                    </div>
                                </div>

                                <div class="add_inside_evisitor col-12">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="checkbox">
                                                    <div class="d-flex align-items-center user_select_none">
                                                        <input type="checkbox" id="modal_rent_details_city_tax">
                                                        <div class="check check_md"></div>
                                                        <div class="pl-2">City tax</div>
                                                    </div>
                                                </label>
                                                <label class="checkbox">
                                                    <div class="d-flex align-items-center user_select_none">
                                                        <input type="checkbox" id="modal_rent_details_guest_visible_on_invoice">
                                                        <div class="check check_md"></div>
                                                        <div class="pl-2">Guest visible on invoice</div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6"></div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="mb-1">Arrival organization</label>
                                                <div id="modal_edit_guest_details_select_arrival_organization" class="select">
                                                    <button class="custom-select focus" id="modal_edit_guest_details_select_arrival_organization_btn"></button>
                                                    <i class="fas fa-angle-down"></i>
                                                    <ul class="select_ul hidden" id="modal_edit_guest_details_select_arrival_organization_ul">
                                                        <!--<li class="select_li" data-id="1">Agencijski (Grupno)</li>
                                                        <li class="select_li" data-id="2">Osobno</li>
                                                        <li class="select_li" data-id="3">Agencijski - (60 dana odgode)</li>-->
                                                        <li class="select_li" data-id="I">Osobno</li>
                                                        <li class="select_li" data-id="A">Agencijski (grupa)</li>

                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-8">
                                            <div class="form-group">
                                                <label class="mb-1">Category obv.bp</label>
                                                <div id="modal_edit_guest_details_select_category" class="select">
                                                    <button class="custom-select focus" id="modal_edit_guest_details_category"></button>
                                                    <i class="fas fa-angle-down"></i>
                                                    <ul class="select_ul hidden" id="modal_edit_guest_details_category_ul">
                                                        <!--<li class="select_li" data-id="1">Osobe do 29 godina : članovi međunarodne omladinske organizacije</li>
                                                        <li class="select_li" data-id="2">Đaci koji nemaju prebivalište u općini ili gradu u kojem se školuju</li>
                                                        <li class="select_li" data-id="3">Turist koji boravi u ugostiteljskom objektu</li>
                                                        <li class="select_li" data-id="4">Djeca : od navršenih 12-18 godina</li>
                                                        <li class="select_li" data-id="5">Turist koji koristi usluge chartera</li>
                                                        <li class="select_li" data-id="6">Pratitelj osobe sa tjelesnim invaliditetom 70% i više</li>
                                                        <li class="select_li" data-id="7">Sudionici školskih paket aranžmana odobrenih od strane školske ustanove</li>
                                                        <li class="select_li" data-id="8">Vlasnici kuće za odmor i članovi njegove obitelji</li>
                                                        <li class="select_li" data-id="9">Osobe koje uslugu noćenja koriste u okviru ostvarivanja programa socijalne skrbi</li>
                                                        <li class="select_li" data-id="9">Prijatelji i ostale osobe koje borave u stanu ili kući stanovnika općine ili grada</li>
                                                        <li class="select_li" data-id="9">Prijatelji i ostale osobe vlasnika kuće ili stana za odmor</li>
                                                        <li class="select_li" data-id="9">Član posade na brodu</li>
                                                        <li class="select_li" data-id="9">Putnik na brodu</li>
                                                        <li class="select_li" data-id="9">Kapetan broda</li>
                                                        <li class="select_li" data-id="9">Djeca do 12 godina : charter</li>
                                                        <li class="select_li" data-id="9">Djeca od navršenih 12-18 godina : charter</li>-->

                                                        <li class="select_li" data-id="14">N - Turist koji boravi u ugostiteljskom objektu</li>
                                                        <li class="select_li" data-id="13">N - Turist koji koristi usluge chartera</li>
                                                        <li class="select_li" data-id="2">J - Djeca : od navršenih 12-18 godina</li>
                                                        <li class="select_li" data-id="5">N - Osobe do 29 godina : članovi međunarodne omladinske organizacije</li>
                                                        <li class="select_li" data-id="3">J - Djeca od navršenih 12-18 godina : charter</li>
                                                        <li class="select_li" data-id="1">A - Djeca : do 12 godina</li>
                                                        <li class="select_li" data-id="7">B - Osobe sa tjelesnim invaliditetom 70% i više</li>
                                                        <li class="select_li" data-id="8">B - Pratitelj osobe sa tjelesnim invaliditetom 70% i više</li>
                                                        <li class="select_li" data-id="12">C - Sudionici školskih paket aranžmana odobrenih od strane školske ustanove</li>
                                                        <li class="select_li" data-id="10">G - Sezonski radnici</li>
                                                        <li class="select_li" data-id="11">N - Studenti</li>
                                                        <li class="select_li" data-id="4">J - Đaci</li>
                                                        <li class="select_li" data-id="9">H - Putnici na putničkom brodu u međunarodnom pomorskom prometu kada se brod nalazi na vezu u luci</li>
                                                        <li class="select_li" data-id="6">L - Osobe koje koriste uslugu noćenja u svom mjestu prebivališta</li>
                                                        <li class="select_li" data-id="Nepoznato">N - Vlasnici kuće za odmor i članovi njegove obitelji</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="modal-footer justify-content-between">
                            <div class="d-flex m-0">
                                <button class="btn btn_silver ml-0 m-1" data-dismiss="modal">Close</button>
                                <button class="btn btn_primary m-1" onclick="document.querySelector('#modal_body_guests_list_tab').click(); modal_details_rent.bl.clear_edit_guest();">Back</button>

                            </div>
                            <button class="btn btn_primary mr-0 m-1 " onclick="modal_details_rent.bl.edit_guest();"><i class="fas fa-plus pr-2"></i>Save</button>
                        </div>
                    </div>


                    <div id="modal_body_price_per_day" class="tab-pane">
                        <div class="modal-body">
                            <div class="font_6 font_bold pb-2 border-bottom">
                                <i class="far fa-calendar-check pr-2"></i>Price
                            </div>
                            <div class="d-flex flex-wrap justify-content-between pt-3">
                                <div class="pr-2 my-2">Average per nights</div>
                                <div class="d-flex flex-wrap">
                                    <div class="pr-2 mt-2">Nights</div>
                                    <div class="form-group">
                                        <input type="text" class="form-control focus" value="5" style="max-width: 4rem;"
                                               disabled id="modal_rent_details_days">
                                        <span class="value font_2"><i class="fas fa-moon"></i></span>
                                    </div>
                                    <div class="mx-2 mt-2">x</div>
                                    <div class="form-group input_remove_number_arrow">
                                        <input type="number" class="form-control focus pr-5 text-right" style="max-width: 9rem;" id="modal_rent_details_average_price" onchange="modal_details_rent.bl.calculate_prices_per_day();">
                                        <span class="value font_2" id="modal_rent_details_average_price_label">EUR</span>
                                    </div>
                                    <div class="mx-2 mt-2">=</div>
                                    <div class="form-group">
                                        <input type="text" class="form-control focus pr-5 text-right" style="max-width: 9rem;" id="modal_rent_details_price_full" onchange="modal_details_rent.bl.price_change();">
                                        <span class="value font_2" id="modal_rent_details_price_full_label">EUR</span>
                                    </div>
                                </div>

                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <div class="pr-2 mt-2">Discount</div>
                                <div class="form-group mb-2 d-flex">
                                    <div class="form-group m-0 input_remove_number_arrow">
                                        <input type="number" class="form-control focus pr-5 text-right" style="max-width: 9rem;" id="modal_rent_details_discount" onchange="modal_details_rent.bl.calculate_discount();">
                                        <span class="value font_2"><i class="fas fa-percent"></i></span>
                                    </div>
                                    <div class="mx-2 mt-2">=</div>
                                    <div class="form-group m-0 input_remove_number_arrow">

                                        <input type="number" class="form-control focus pr-5 text-right" style="max-width: 9rem; color: red;" id="modal_rent_details_discount_price">
                                        <span class="value font_2" id="modal_rent_details_discount_price_label">EUR</span>
                                    </div>
                                </div>
                            </div>
                            <div class="border-bottom mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="font_5 font_bold pr-2 mt-3">Prices per day</span>
                                    <div class="form-group pr-2 mt-3">
                                        <span class="font_bold font_5">Price: </span>
                                        <span class="font_bold font_5" id="modal_rent_details_price_after_discount">250</span>
                                        <span class="font_bold font_5" id="modal_rent_details_price_after_discount_label">€</span>
                                    </div>
                                </div>

                                <!-- List per day -->
                                <div class="list_per_day border-top pb-2 d-flex flex-wrap overflow-auto" id="modal_rent_details_list_per_day" style="background-color: #f0f8ff2e;">
                                    <!--<div class="py-1 pl-2">
                                        <div class="text-center">01.01.2020</div>
                                        <div class="form-group m-0">
                                            <input type="text" class="form-control focus text-right pr-5" value="100"
                                                   style="max-width: 9rem; width: 9rem;">
                                            <span class="value font_2">EUR</span>
                                        </div>
                                    </div>
                                    <div class="py-1 pl-2">
                                        <div class="text-center">02.01.2020</div>
                                        <div class="form-group m-0">
                                            <input type="text" class="form-control focus text-right pr-5" value="100"
                                                   style="max-width: 9rem; width: 9rem;">
                                            <span class="value font_2">EUR</span>
                                        </div>
                                    </div>
                                    <div class="py-1 pl-2">
                                        <div class="text-center">03.01.2020</div>
                                        <div class="form-group m-0">
                                            <input type="text" class="form-control focus text-right pr-5" value="100"
                                                   style="max-width: 9rem; width: 9rem;">
                                            <span class="value font_2">EUR</span>
                                        </div>
                                    </div>
                                    <div class="py-1 pl-2">
                                        <div class="text-center">04.01.2020</div>
                                        <div class="form-group m-0">
                                            <input type="text" class="form-control focus text-right pr-5" value="100"
                                                   style="max-width: 9rem; width: 9rem;">
                                            <span class="value font_2">EUR</span>
                                        </div>
                                    </div>
                                    <div class="py-1 pl-2">
                                        <div class="text-center">05.01.2020</div>
                                        <div class="form-group m-0">
                                            <input type="text" class="form-control focus text-right pr-5" value="100"
                                                   style="max-width: 9rem; width: 9rem;">
                                            <span class="value font_2">EUR</span>
                                        </div>
                                    </div>
                                    <div class="py-1 pl-2">
                                        <div class="text-center">06.01.2020</div>
                                        <div class="form-group m-0">
                                            <input type="text" class="form-control focus text-right pr-5" value="100"
                                                   style="max-width: 9rem; width: 9rem;">
                                            <span class="value font_2">EUR</span>
                                        </div>
                                    </div>
                                    <div class="py-1 pl-2">
                                        <div class="text-center">07.01.2020</div>
                                        <div class="form-group m-0">
                                            <input type="text" class="form-control focus text-right pr-5" value="100"
                                                   style="max-width: 9rem; width: 9rem;">
                                            <span class="value font_2">EUR</span>
                                        </div>
                                    </div>-->
                                </div>
                            </div>
                            <!-- Dscount -->
                            <div class="discount">
                                <div class="d-flex align-items-center justify-content-between py-2">
                                    <!--<div>Usluge</div>-->
                                    <div class="form-group m-0">
                                        <!--<input type="text" class="form-control focus text-right pr-5" value="100"
                                               style="max-width: 9rem;">
                                        <span class="value font_2">EUR</span>-->
                                        <!--<button class="btn btn_primary" onclick="modal_details_rent.ui.insert_items_row();">Dodaj uslugu</button>-->
                                    </div>
                                </div>
                                <div class="d-flex align-items-center justify-content-between py-2">
                                    <div class="pb-2" id="modal_rent_details_items_table">
                                        <table class="table modal_table m-0">
                                            <thead>
                                                <tr>

                                                    <th scope="col" class="text-left font_5">Item</th>
                                                    <th scope="col" class="text-center">Price</th>
                                                    <th scope="col" class="text-center">Amount</th>
                                                    <th scope="col" class="text-center">Tax</th>
                                                    <th scope="col" class="text-center">Total</th>
                                                    <th scope="col"></th>
                                                </tr>
                                            </thead>
                                            <tbody id="modal_rent_details_tbody">
                                                <tr id="modal_rent_details_tr" style="background-color: #f0f8ff2e;">

                                                    <td style="min-width: 13rem;">
                                                        <div class="form-group m-0">
                                                            <div id="modal_rent_details_service" class="select">
                                                                <button class="custom-select focus">Choose item</button>
                                                                <i class="fas fa-angle-down"></i>
                                                                <ul class="select_ul hidden" id="modal_rent_details_item_list">
                                                                    <!--<li class="select_li" data-id="1">Sauna</li>
                                                                    <li class="select_li" data-id="2">Parking</li>
                                                                    <li class="select_li" data-id="3">Excursion</li>
                                                                    <li class="select_li" data-id="4">Karting</li>
                                                                    <li class="select_li" data-id="5">Boat</li>-->
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0 input_remove_number_arrow">
                                                            <input type="number" class="form-control focus text-center" id="modal_rent_details_item_price" onchange="modal_details_rent.bl.change_items_total_price('modal_rent_details_tr')">
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0 input_remove_number_arrow">
                                                            <input type="number" class="form-control focus text-center" id="modal_rent_details_item_amount" onchange="modal_details_rent.bl.change_items_total_price('modal_rent_details_tr')">
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0 input_remove_number_arrow">
                                                            <input type="number" class="form-control focus text-center pr-4" id="modal_rent_details_item_tax" onchange="modal_details_rent.bl.change_items_total_price('modal_rent_details_tr')">
                                                            <span class="value font_2"><i class="fas fa-percent"></i></span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0">
                                                            <input type="text" class="form-control text-right pr-5" value="0" readonly disabled id="modal_rent_details_item_total">
                                                            <span class="value font_2">EUR</span>
                                                        </div>
                                                    </td>
                                                    <td scope="row" class="trash"><i class="far fa-plus-square fa-lg" onclick="modal_details_rent.bl.rent_item_add();" data-toggle="tooltip" data-placement="top" data-original-title="Add"></i></td>
                                                </tr>
                                                <!--<tr>
                                                    <td scope="row" class="trash"><i class="fas fa-trash-alt"></i></td>
                                                    <td style="min-width: 13rem;">
                                                        <div class="form-group m-0">
                                                            <div id="modal_rent_details_service" class="select">
                                                                <button class="custom-select focus"></button>
                                                                <i class="fas fa-angle-down"></i>
                                                                <ul class="select_ul hidden" id="modal_rent_details_items_list">
                                                                    <li class="select_li" data-id="1">Sauna</li>
                                                                    <li class="select_li" data-id="2">Parking</li>
                                                                    <li class="select_li" data-id="3">Excursion</li>
                                                                    <li class="select_li" data-id="4">Karting</li>
                                                                    <li class="select_li" data-id="5">Boat</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0">
                                                            <input type="text" class="form-control focus" value="" id="modal_rent_details_item_price">
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0">
                                                            <input type="text" class="form-control focus" id="modal_rent_details_item_amount">
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0">
                                                            <input type="text" class="form-control focus pr-4" id="modal_rent_details_item_tax">
                                                            <span class="value font_2"><i class="fas fa-percent"></i></span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group m-0">
                                                            <input type="text" class="form-control pr-5" readonly disabled id="modal_rent_details_item_total">
                                                            <span class="value font_2">EUR</span>
                                                        </div>
                                                    </td>
                                                </tr>-->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between border-top mb-2 pt-2">
                                    <div class="mt-2 font_5 font_medium">Items price:</div>
                                    <div class="form-group m-0 pr-2">
                                        <input type="text" class="form-control focus pr-5 text-right" style="max-width: 9rem;" value="0" disabled onchange="modal_details_rent.bl.calculate_total_items_prices();" id="modal_rent_details_price_extra_price">
                                        <span class="value font_2" id="modal_rent_details_price_extra_price_label">EUR</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Total -->
                            <div class="total border-top pb-3">
                                <div class="d-flex flex-wrap align-items-center justify-content-between pt-3">
                                    <div class="font_5 font_medium">Total price:</div>
                                    <div class="d-flex flex-wrap">
                                        <div class="form-group pr-1">
                                            <input type="text" class="form-control focus font_5 font_medium text-center"
                                                   value="5" style="max-width: 5rem;" id="modal_details_rent_nights" disabled>
                                            <span class="value font_3 pr-1 "><i class="fas fa-moon"></i></span>
                                        </div>
                                        <div class="mx-2 mt-2">x</div>
                                        <div class="form-group pr-1">
                                            <input type="text" class="form-control focus font_5 font_medium text-right"
                                                   value="100" style="max-width: 9rem; padding-right: 3.5rem;" id="modal_rent_details_list_per_day_sum">
                                            <span class="value font_2 pr-2" id="modal_rent_details_list_per_day_sum_label">EUR</span>
                                        </div>
                                        <div class="mx-2 mt-2">=</div>
                                        <div class="form-group pr-2">
                                            <input type="text" class="form-control focus font_5 font_medium text-right"
                                                   value="100" style="max-width: 9rem; padding-right: 2.5rem;" id="modal_rent_details_price_sum" onchange="modal_details_rent.bl.calculate_total_items_prices();">
                                            <span class="value font_2 pr-2" id="modal_rent_details_price_sum_label">EUR</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="border-top">
                                <div class="pt-3">
                                    <div class="d-flex flex-wrap align-items-center justify-content-between pt-3">
                                        <div class="font_5">
                                            Advance payment
                                            <span class="text-red" id="modal_rent_details_advance_percent">(30%)</span>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <div class="form-group m-0 pr-2">
                                                <input type="text" class="form-control focus" text-right style="max-width: 9rem" value="10" id="modal_rent_details_advance_percent_new" onchange="modal_details_rent.bl.change_advance_percent();" />
                                                <span class="value font_2 pr-2"><i class="fas fa-percent"></i></span>
                                            </div>
                                            <div class="mx-2">=</div>
                                            <div class="form-group m-0 pr-2">
                                                <input type="text" class="form-control focus" text-right style="max-width: 9rem" value="100" id="modal_rent_details_in_advance" onchange="modal_details_rent.bl.change_advance_price();" />
                                                <span class="value font_2 pr-2" id="modal_rent_details_in_advance_label">EUR</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center justify-content-between pt-3">
                                        <div class="font_5">Total remaining amount</div>
                                        <div class="form-group m-0 pr-2">
                                            <input type="text" class="form-control focus" text-right style="max-width: 9rem" value="100" disabled id="modal_rent_details_price_difference" />
                                            <span class="value font_2 pr-2" id="modal_rent_details_price_difference_label">EUR</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="text-right">
                                <button type="button" class="btn btn_primary" onclick="modal_details_rent.bl.save_prices()">
                                    <i class="fas fa-save pr-2"></i>Save
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="modal_body_option" class="tab-pane modal_tabs_option">
                        <div class="modal-body">
                            <div class="font_6 font_bold pb-2"><i class="far fa-calendar-plus pr-2"></i>Options</div>
                            <div class="d-flex align-items-center pt-2">
                                <div class="pr-2">Options is active until</div>
                                <div class="position-relative">
                                    <input id="modal_datepicker_input_details_option" type="text"
                                           class="form-control focus modal_datepicker_input_option"
                                           style="max-width: 8rem">
                                    <span id="modal_datepicker_details_option" class="modal_datepicker_option"></span>
                                    <span id="modal_input_details_close" class="modal_input_close">
                                        <i class="fas fa-times"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="pt-2">Remaining days: 0</div>
                        </div>
                        <div class="modal-footer">
                            <div class="text-right">
                                <button type="button" class="btn btn_primary" data-dismiss="modal">
                                    <i class="fas fa-save pr-2"></i>Save
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="modal_body_add_payment" class="tab-pane add_payment">
                        <div class="modal-body pb-0">
                            <div class="font_6 font_bold pb-2"><i class="fas fa-money-bill-alt pr-2"></i>Payment</div>
                            <table class="table mb-0">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Type</th>
                                        <th>Price</th>
                                        <th>Exchange rate</th>
                                    </tr>
                                </thead>
                                <tbody id="modal_rent_details_payment_recive_tbody">
                                    <tr>
                                        <td>1.1.2021</td>
                                        <td><span class="type font_2 text-uppercase px-2 py-1">Cash</span></td>
                                        <td>600 EUR</td>
                                        <td>7,45</td>
                                    </tr>
                                    <tr>
                                        <td>1.1.2021</td>
                                        <td><span class="type font_2 text-uppercase px-2 py-1">Cash</span></td>
                                        <td>600 EUR</td>
                                        <td>7,45</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer d-flex justify-content-between">
                            <a class="btn btn_silver"><i class="fas fa-edit pr-2"></i>Edit</a>
                            <button type="button" class="btn btn_primary" data-dismiss="modal">
                                <i class="fas fa-save pr-2"></i>Save
                            </button>
                        </div>
                    </div>
                    <div id="modal_body_add_key" class="tab-pane add_key">
                        <div class="modal-body pb-0">
                            <div class="font_6 font_bold pb-2"><i class="fas fa-key pr-2"></i>Smart door</div>
                            <div class="overflow-auto">
                                <table class="table mb-0 modal_smartdoor">
                                    <thead>
                                        <tr>
                                            <th scope="col">Name</th>
                                            <th scope="col">Pin</th>
                                            <th scope="col">From</th>
                                            <th scope="col">Until</th>
                                        </tr>
                                    </thead>
                                    <tbody id="modal_rent_details_doors_tbody">
                                        <tr>
                                            <td>Door 01</td>
                                            <td>
                                                <span><input type="text" pattern="\d*" maxlength="8" class="inside_input text-center" value="4583" style="width: 6rem;" /></span><span class="px-1 smartdoor_icon" data-toggle="tooltip" data-placement="top" data-original-title="General"><i class="fas fa-retweet"></i></span><span class="px-1 smartdoor_icon" data-toggle="tooltip" data-placement="top" data-original-title="Save"><i class="fab fa-keycdn"></i></span>
                                            </td>
                                            <td>19.01.2021 @ 9h</td>
                                            <td>21.01.2021 @ 10h</td>
                                        </tr>
                                        <tr>
                                            <td>Door 02</td>
                                            <td>
                                                <span><input type="text" pattern="\d*" maxlength="8" class="inside_input text-center" value="4583" style="width: 6rem;" /></span><span class="px-1 smartdoor_icon" data-toggle="tooltip" data-placement="top" data-original-title="General"><i class="fas fa-retweet"></i></span><span class="px-1 smartdoor_icon" data-toggle="tooltip" data-placement="top" data-original-title="Save"><i class="fab fa-keycdn"></i></span>
                                            </td>
                                            <td>19.01.2021 @ 9h</td>
                                            <td>21.01.2021 @ 10h</td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                        <div class="modal-footer d-flex justify-content-end">
                            <button type="button" class="btn btn_primary" data-dismiss="modal">
                                <i class="fas fa-save pr-2"></i>Save
                            </button>
                        </div>
                    </div>
                    <div id="modal_body_chat" class="tab-pane chat">
                        <div class="modal-body">
                            <div class="font_6 font_bold pb-2"><i class="far fa-comments pr-2"></i>Chat</div>
                            <div class="chat_box px-3" id="modal_rent_details_chat">
                            </div>
                            <hr />
                            <div class="chat_new_message">
                                <textarea class="form-control focus" id="model_rent_details_chatbox"></textarea>
                                <button class="btn btn_primary d-block ml-auto mt-2" onclick="modal_details_rent.bl.chat_messages()"><i class="fas fa-paper-plane pr-2"></i>Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- templates -->
<section>
    <!--template for rent status list-->
    <template id="template_rent_status_li">

        <li class="dropdown_li" id="modal_rent_details_status_id" data-id="${rent_status_id}" data-name="${name}">
            <div class="d-flex align-items-center">
                <div class="icon" style="background-color: ${color};"></div>
                <div class="name align-self-center">${name}</div>
            </div>
        </li>

    </template>

    <!--template for rent sources list-->
    <template id="template_rent_sources_li">

        <li class="dropdown_li" id="modal_rent_details_source_id" data-id="${apartment_rent_source_id}" data-name="${icon}">
            <div class="d-flex align-items-center">
                <div class="icon icon_img">
                    <img src="./assets/images/icons/portals/${img}.svg" alt="">
                </div>
                <div class="name align-self-center">${name}</div>
            </div>
        </li>
    </template>

    <!--template for payment methods list-->
    <template id="template_payment_methods_li">

        <li class="dropdown_li" data-id="${payment_method_id}" data-name="${name}" onclick="select_drop">
            <div class="d-flex align-items-center">
                <!--<div class="icon"><i class="fas fa-piggy-bank"></i></div>-->
                <div class="name align-self-center">${name}</div>
            </div>
        </li>
    </template>

    <!--template for list of objects-->
    <template id="template_object_list_li">

        <li class="dropdown_li busy" value="1" data-id="${object_id}" data-name="${name}">
            <div class="d-flex align-items-center text-left">
                <div class="icon ${color}"></div>
                <span>${name}</span>
            </div>
        </li>

    </template>

    <!--template for list of countries-->
    <template id="template_countries_list_li">

        <li class="dropdown_li" data-id="${id}" data-name="${country}">
            <div class="d-flex align-items-center">
                <span class="flag pr-2">
                    <img src="./assets/images/icons/flags/${code2}.svg"
                         alt="">
                </span>
                <span>${country}</span>
            </div>
        </li>

    </template>

    <!--template for countries list in adding guest-->
    <template id="template_countries_list_add_guest">
        <li class="select_li" data-id="${id}" data-code1="${code1}"><span><img src="./assets/images/icons/flags/${code2}.svg" alt=""></span>${country}</li>
    </template>

    <!--template for invoices for one rent-->
    <template id="template_invoices_tr">

        <tr class="tr-bill">
            <td>${date}</td>
            <td>${label}</td>
            <td>${type}</td>
            <td>${price}</td>
            <td class="text-right">
                <label onclick="modal_details_rent.ui.tr_success(this)"
                       class="checkbox">
                    <input type="checkbox" checked>
                    <span class="check check_xl"></span>
                </label>
            </td>
        </tr>

    </template>

    <!--template for doors lock-->
    <!--<template id="template_rent_doors_locks">

        <tr>
            <td>${username}</td>
            <td>
                <span><input type="text" pattern="\d*" maxlength="8" class="inside_input text-center" value="${pin}" style="width: 6rem;" /></span><span class="px-1 smartdoor_icon" data-toggle="tooltip" data-placement="top" data-original-title="General"><i class="fas fa-retweet"></i></span><span class="px-1 smartdoor_icon" data-toggle="tooltip" data-placement="top" data-original-title="Save"><i class="fab fa-keycdn"></i></span>
            </td>
            <td>${start_date}</td>
            <td>${end_date}</td>
        </tr>

    </template>-->
    <!--template for chat messages that are recived-->
    <template id="template_messages_recive">

        <div class="receive my-2 mr-5">
            <div class="receive_text">${text}</div>
            <div class="receive_date pl-2">${date} ${time}</div>
        </div>

    </template>

    <!--template for chat massages that are send-->
    <template id="template_messages_send">
        <div class="send ml-5">
            <div class="send_text">${text}</div>
            <div class="d-flex justify-content-end">
                <div class="event text-success"><i class="${seen}"></i></div>
                <div class="send_date text-right pl-2 pr-1">${date} ${time}</div>
            </div>
        </div>
    </template>

    <!--template for email log-->
    <template id="template_log_email">
        <tr>
            <td>${subject}</td>
            <td>${created}</td>
            <td>${time}</td>
            <td class="text-right text-success"><i class="${email_status}"></i></td>
        </tr>
    </template>

    <!--template for payment recived-->
    <template id="template_payment_recive">

        <tr>
            <td>${created}</td>
            <td><span class="type font_2 text-uppercase px-2 py-1">${payment_method_type}</span></td>
            <td>${price} ${currency_code}</td>
            <td>7,45</td>
        </tr>

    </template>

    <!--template for list of price days-->
    <template id="template_list_per_day">

        <div class="py-1 pl-2 pt-2 pb-2">
            <div class="text-center" style="font-size:smaller">${day}</div>
            <div class="form-group m-0">
                <input type="text" class="form-control focus text-center" value="${price}" data-id="${id}" data-date="${day}"
                       style="max-width: 6rem; width: 6rem;" onchange="modal_details_rent.bl.price_change_day();">

            </div>
        </div>
    </template>

    <!--template for items list-->
    <template id="template_items_list">
        <li class="select_li" data-id="${id}" data-name="${name}">${name}</li>
    </template>

    <!--template for new row of item-->
    <template id="template_items_new_row">
        <tr id="modal_rent_details_tr_${number}" data-id="">

            <td style="min-width: 13rem;">
                <div>
                    <input type="text" class="form-control focus" value="" id="modal_rent_details_service_${number}" />
                </div>
            </td>
            <td>
                <div class="form-group m-0 input_remove_number_arrow">
                    <input type="number" class="form-control focus" id="modal_rent_details_item_price_${number}" onchange="modal_details_rent.bl.change_items_total_price(`modal_rent_details_tr_${number}`)">
                </div>
            </td>
            <td>
                <div class="form-group m-0 input_remove_number_arrow">
                    <input type="number" class="form-control focus" id="modal_rent_details_item_amount_${number}" onchange="modal_details_rent.bl.change_items_total_price(`modal_rent_details_tr_${number}`)">
                </div>
            </td>
            <td>
                <div class="form-group m-0 input_remove_number_arrow">
                    <input type="number" class="form-control focus pr-4" id="modal_rent_details_item_tax_${number}" onchange="modal_details_rent.bl.change_items_total_price(`modal_rent_details_tr_${number}`)">
                    <span class="value font_2"><i class="fas fa-percent"></i></span>
                </div>
            </td>
            <td>
                <div class="form-group m-0">
                    <input type="text" class="form-control pr-5" readonly disabled id="modal_rent_details_item_total_${number}">
                    <span class="value font_2">EUR</span>
                </div>
            </td>
            <td scope="row" class="trash"><i class="fas fa-trash-alt red fa-lg" onclick="modal_details_rent.bl.delete_row(`modal_rent_details_tr_${number}`, `${id}`); modal_details_rent.bl.total_item_price();"></i></td>
        </tr>
    </template>

    <!--template for list of guest-->
    <template id="template_guests_list">
        <tr class="tr-bill" onclick="modal_details_rent.ui.load_selected_guest(`${id}`)">
            <td style="max-width: 2rem;">
                <img src="./assets/images/icons/flags/${code2}.svg" height="20" alt="">
            </td>
            <td>${name_first} ${name_last}</td>
            <td>${years}</td>
            <td>${days} days</td>
            <td>${price} €</td>
            <td class="text-right">
                <!--onclick="modal_details_rent.ui.tr_success(this)"-->
                <label class="checkbox p-0">
                    <input type="checkbox" ${checked}>
                    <span class="check check_xl"></span>
                </label>
            </td>
        </tr>
    </template>

    <!--template for showing existing guests in add guest tab-->
    <template id="template_existing_guest">

        <div class="p-2 btn_hover cursor_point" onclick="modal_details_rent.ui.load_existing_guest(`${id}`);">
            <div>
                <img src="./assets/images/icons/flags/${code2}.svg" height="15" alt="">
                <span class="font_3">${name_first} ${name_last}</span>
            </div>
            <div>
                <span class="font_3">Doc. No. </span>
                <span class="border-left mx-2 border-dark"></span>
                <span class="font_3">${document_number}</span>
            </div>
        </div>
        <hr class="my-2" />
    </template>
</section>

<!-- scripts -->
<script>

    var modal_details_rent = {};

    modal_details_rent.rent_id = '';
    modal_details_rent.object_id = '';
    modal_details_rent.item_id = '';
    modal_details_rent.calendar_book_dates = [];
    modal_details_rent.items_number = 0;
    modal_details_rent.flag = 0;
    modal_details_rent.guest_id = '';
    modal_details_rent.curreny_label = '';
    modal_details_rent.days = '';
    modal_details_rent.curreny_id = '';
    modal_details_rent.exchange = '';

    // dates selected on calendar
    modal_details_rent.calendar_date_from = '';
    modal_details_rent.calendar_date_until = '';

    // dates of rents
    modal_details_rent.date_from = '';
    modal_details_rent.date_until = '';

    // loading
    modal_details_rent.load = () => {


        // Global ui
        modal_details_rent.ui.select_custom("modal_rent_details_select_curr");


        modal_details_rent.ui.load_rent_status();
        modal_details_rent.ui.load_rent_sources();
        modal_details_rent.ui.load_payment_methods();
        modal_details_rent.ui.load_object_list();
        modal_details_rent.ui.load_countries_list();
        modal_details_rent.ui.load_items_list();
        modal_details_rent.ui.load_guest_countries();

        //modal_details_rent.ui.load_rent_doors_locks();

        ui.dropdown_list("modal_source");
        ui.dropdown_list("modal_status");
        ui.dropdown_list("modal_paid");
        ui.dropdown_list("modal_filter_country");
        ui.dropdown_list("modal_filter_object");
        modal_details_rent.ui.select_on_mobile();

        // Local ui
        modal_details_rent.ui.tr_current_success("modal_body_bills");
        modal_details_rent.ui.filter_search_list("modal_filter_country");
        modal_details_rent.ui.filter_search_list("modal_filter_object");
        modal_details_rent.ui.filter_available();
        modal_details_rent.ui.modal_close("modal_rent_details");
        modal_details_rent.ui.select_custom('modal_rent_details_service');

        // for edit guest tab
        ui.custom_select("modal_edit_guest_details_select_country");
        ui.custom_select("modal_edit_guest_details_select_type_of_document");
        ui.custom_select("modal_edit_guest_details_select_citizenship");
        ui.custom_select("modal_edit_guest_details_select_country_of_birth");
        ui.custom_select("modal_edit_guest_details_select_arrival_organization");
        //ui.custom_select("modal_edit_guest_details_select_type_of_service");
        ui.custom_select("modal_edit_guest_details_select_category");

        // for add guest tab
        ui.custom_select("modal_add_guest_details_select_country");
        ui.custom_select("modal_add_guest_details_select_type_of_document");
        ui.custom_select("modal_add_guest_details_select_citizenship");
        ui.custom_select("modal_add_guest_details_select_country_of_birth");
        //ui.custom_select("modal_add_guest_details_select_arrival_organization");
        //ui.custom_select("modal_add_guest_details_select_type_of_service");
        //ui.custom_select("modal_add_guest_details_select_category");

        modal_details_rent.bl.only_dropdown("modal_mail_send");
        modal_details_rent.bl.only_dropdown("modal_mail_send_offer");
        modal_details_rent.bl.only_dropdown("modal_mail_send_voucher");

    }

    modal_details_rent.ui = new function () {

        //this.select_custom = function (id) {

        //    let select_id = document.getElementById(id);
        //    let btn = select_id.getElementsByTagName("button")[0];
        //    let ul = select_id.getElementsByTagName("ul")[0];
        //    let li = select_id.getElementsByTagName("li")[0];
        //    btn.onclick = function () {
        //        if (!btn.classList.contains("open")) {
        //            btn.classList.add("open");
        //            ul.classList.remove("hidden");
        //            let ulOffset = $(ul).offset();
        //            let spaceUp = (ulOffset.top - $(btn).height() - $(ul).height()) - $(window).scrollTop();
        //            let spaceDown = $(window).scrollTop() + $(window).height() - (ulOffset.top + $(ul).height());
        //            if (spaceDown < 0 && (spaceUp >= 0 || spaceUp > spaceDown)) {
        //                ul.classList.add("reverse");
        //            } else {
        //                ul.classList.remove("reverse");
        //            }
        //        } else {
        //            btn.classList.remove("open");
        //            ul.classList.add("hidden");
        //        }
        //    };
        //    document.addEventListener("mouseup", function (e) {
        //        if (!$(btn).is(e.target) && $(ul).has(e.target).length === 0) {
        //            if (!$(ul).is(e.target) && $(ul).has(e.target).length === 0) {
        //                ul.classList.add("hidden");
        //                btn.classList.remove("open");
        //            }
        //        }
        //    });
        //    for (let i = 0; i < ul.children.length; i++) {
        //        ul.children[i].onclick = function (e) {
        //            btn.innerHTML = e.currentTarget.innerHTML;
        //            ul.classList.add("hidden");
        //            btn.classList.remove("open");
        //        }
        //    }

        //    for (let i = 0; i < ul.children.length; i++) {
        //        const element = ul.children[i];

        //        element.onclick = function (e) {

        //            btn.innerHTML = e.currentTarget.innerHTML;
        //            if (id == 'modal_new_rent_select_countries') {

        //                document.querySelector('#' + id).dataset.id = e.currentTarget.dataset.id;
        //            } else {
        //                document.querySelector('#' + id).dataset.name = e.currentTarget.innerText;
        //                document.querySelector('#' + id).dataset.id = e.currentTarget.dataset.id;

        //            }


        //            ul.classList.add("hidden");
        //            //button.classList.remove("open");
        //        }
        //    }
        //}

        this.input_focus = function () {
            document.getElementById('modal_rent_details_country_input').focus();
        }

        // Tr current success
        this.tr_current_success = function (id) {
            let table_id = document.getElementById(id);
            let checkboxes = table_id.querySelector("input[type='checkbox']");
            let tr = table_id.querySelectorAll(".tr-bill");
            for (let i = 0; i < tr.length; i++) {
                var checkbox = tr[i].querySelector("input[type='checkbox']");
                if (checkbox.checked == true) {
                    tr[i].classList.add("bg_success_shadow");
                } else {
                    tr[i].classList.remove("bg_success_shadow");
                }
            }
        }

        this.fp_calendar = null;

        // Modal calendar
        this.modal_details_calendar = function () {

            // modal_details_calendar

            modal_details_rent.ui.fp_calendar = flatpickr("#rent_details_calendar", {
                mode: "range",
                dateFormat: "Y-m-d",
                //disable: [
                //    {
                //        from: modal_rent_details_rent_date_from.innerHTML,
                //        to: modal_rent_details_rent_date_until.innerHTML
                //    }],

                inline: true,


                onChange: function (selectedDates, dateStr, instance) {

                    //debugger;

                    if (!modal_details_rent.calendar_date_from == false && !modal_details_rent.until_date == false) {


                        var date_iso = js.date.toIso(selectedDates[0]);

                        modal_details_rent.calendar_date_from = date_iso;
                        modal_rent_details_rent_date_from.innerHTML = date_iso;
                        modal_details_rent.until_date = '';
                    }
                    else {

                        //var date = new Intl.DateTimeFormat('en-GB').format(selectedDates[0]);

                        //var date = selectedDates[0].getDate() + '.' + (selectedDates[0].getMonth() + 1) + '.' + selectedDates[0].getFullYear().toString().substr(-2);
                        var date_iso = js.date.toIso(selectedDates[0]);
                        modal_rent_details_rent_date_from.innerHTML = date_iso;


                        if (!selectedDates[1] == false) {
                            
                            //var date = new Intl.DateTimeFormat('en-GB').format(selectedDates[1]);

                            // var date = selectedDates[1].getDate() + '.' + (selectedDates[0].getMonth() + 1) + '.' + selectedDates[1].getFullYear().toString().substr(-2);
                            var date_iso = js.date.toIso(selectedDates[1]);
                            modal_details_rent.until_date = date_iso;
                            modal_rent_details_rent_date_until.innerHTML = date_iso;
                            document.querySelector('.modal_dropdown_menu_calendar').classList.add('hidden');

                        }

                    }
                },

            });

            flatpickr("#modal_edit_guest_details_date_from", {
                dateFormat: "Y-m-d",
                allowInput: true

            });

            // instance for date until
            flatpickr("#modal_edit_guest_details_date_until", {
                dateFormat: "Y-m-d",
                allowInput: true
            });

            // instance for date of birth
            flatpickr("#modal_edit_guest_details_date_birth", {
                dateFormat: "Y-m-d",
                allowInput: true
            });

            flatpickr("#modal_add_guest_details_date_from", {
                dateFormat: "Y-m-d",
                allowInput: true

            });

            // instance for date until
            flatpickr("#modal_add_guest_details_date_until", {
                dateFormat: "Y-m-d",
                allowInput: true
            });

            // instance for date of birth in add guest tab
            flatpickr("#modal_add_guest_details_date_birth", {
                dateFormat: "Y-m-d",
                allowInput: true
            });

        }

        //set calendar
        this.calendar_set = async function () {
            var url = 'https://api.zaggy.net/objects/days_blocked/' + modal_details_rent.object_id;

            //await $.getJSON(url, function (data) {
            //    modal_details_rent.calendar_book_dates = data;
            //    debugger;
            //    modal_details_rent.ui.modal_details_calendar();
            //}).promise();

            let data = await $.getJSON(url).promise();
            modal_details_rent.calendar_book_dates = data;
            modal_details_rent.ui.modal_details_calendar();
        }

        // Custom select of dropdown menus
        this.select_custom = function (id) {
            let select_id = document.getElementById(id);
            let btn = select_id.getElementsByTagName("button")[0];
            let ul = select_id.getElementsByTagName("ul")[0];
            let li = select_id.getElementsByTagName("li")[0];

            btn.onclick = function () {
                if (!btn.classList.contains("open")) {
                    btn.classList.add("open");
                    ul.classList.remove("hidden");
                    let ulOffset = $(ul).offset();
                    let spaceUp = (ulOffset.top - $(btn).height() - $(ul).height()) - $(window).scrollTop();
                    let spaceDown = $(window).scrollTop() + $(window).height() - (ulOffset.top + $(ul).height());
                    if (spaceDown < 0 && (spaceUp >= 0 || spaceUp > spaceDown)) {
                        ul.classList.add("reverse");
                    } else {
                        ul.classList.remove("reverse");
                    }
                } else {
                    btn.classList.remove("open");
                    ul.classList.add("hidden");
                }
            };

            document.addEventListener("mouseup", function (e) {
                if (!$(btn).is(e.target) && $(ul).has(e.target).length === 0) {
                    if (!$(ul).is(e.target) && $(ul).has(e.target).length === 0) {
                        ul.classList.add("hidden");
                        btn.classList.remove("open");
                    }
                }
            });

            for (let i = 0; i < ul.children.length; i++) {
                ul.children[i].onclick = function (e) {
                    btn.innerHTML = e.currentTarget.innerHTML;
                    ul.classList.add("hidden");
                    btn.classList.remove("open");
                }
            }
        }

        // Modal date option
        this.datepicker_input = function (id, input, remove) {

            let input_date = document.getElementById(input);
            let remove_date = document.getElementById(remove);

            input_date.addEventListener("focus", function () {
                $("#" + id).fadeIn(100);
                $("#" + input).addClass("open");
            });

            $(function () {
                $("#" + id).datepicker({
                    onSelect: function (dateText, inst) {
                        $("#" + input).val(dateText);
                        $("#" + id).fadeOut(100);
                        $("#" + input).removeClass("open");
                    }
                });
            });

            $(document).mouseup(function (e) {
                if (!$("#" + input).is(e.target) && $("#" + input).has(e.target).length === 0) {
                    $("#" + id).fadeOut(100);
                }
            });

            remove_date.onclick = function () {
                $("#" + input).val("");
            }
        }

        // Modal details open calendar
        this.modal_details_show_calendar = function (id) {

            let btn = document.querySelector("." + id);
            let dropdown = btn.getElementsByClassName("modal_dropdown_menu_calendar")[0];

            btn.addEventListener("click", function () {
                if (!btn.classList.contains("open")) {
                    btn.classList.add("open");
                    dropdown.classList.remove("hidden");
                }
            });

            document.addEventListener("mouseup", function (e) {
                if (!$(dropdown).is(e.target) && $(dropdown).has(e.target).length === 0) {
                    dropdown.classList.add("hidden");
                    btn.classList.remove("open");
                }
            });
        }

        // Modal details check paid
        this.modal_details_paid = function (id) {
            let check = document.getElementById(id);
            let btn = check.getElementsByClassName("checkbox")[0];
            let check_box = check.querySelector("input[type='checkbox']");
            btn.onclick = function () {
                if (check_box.checked == true) {
                    btn.classList.add("bg_success_shadow");
                } else {
                    btn.classList.remove("bg_success_shadow");
                }
            };
        }

        // Modal details - filter for search country
        this.filter_search_list = function (id) {
            let filter_id = document.getElementById(id);
            let li = filter_id.querySelectorAll(".dropdown_li");
            let input = filter_id.getElementsByClassName("form-control")[0];
            document.addEventListener("keyup", function () {
                filter = input.value.toUpperCase();
                for (let i = 0; i < li.length; i++) {
                    let list = li[i].children[0].lastElementChild;
                    textValue = list.textContent || list.innerText;
                    if (textValue.toUpperCase().indexOf(filter) > -1) {
                        li[i].style.display = "";
                    } else {
                        li[i].style.display = "none";
                    }
                }
            })
        }

        // Object available - all || Free || Taken
        this.filter_available = function () {
            let filter_id = document.getElementById("modal_filter_object");
            let all_btn = filter_id.getElementsByClassName("btn_all")[0];
            let free_btn = filter_id.getElementsByClassName("btn_free")[0];
            let taken_btn = filter_id.getElementsByClassName("btn_taken")[0];
            let dropdown_li = filter_id.querySelectorAll(".dropdown_li");
            all_btn.onclick = function () {
                for (let i = 0; i < dropdown_li.length; i++) {
                    dropdown_li[i].classList.remove("hidden");
                }
            }
            free_btn.addEventListener("click", function () {
                for (let i = 0; i < dropdown_li.length; i++) {
                    dropdown_li[i].classList.remove("hidden");
                    if (!dropdown_li[i].classList.contains("free")) {
                        dropdown_li[i].classList.add("hidden");
                    }
                }
            })
            taken_btn.addEventListener("click", function () {
                for (let i = 0; i < dropdown_li.length; i++) {
                    dropdown_li[i].classList.remove("hidden");
                    if (!dropdown_li[i].classList.contains("taken")) {
                        dropdown_li[i].classList.add("hidden");
                    }
                }
            })
        }

        // Tr checkbox click success
        this.tr_success = function (e) {
            var tr_bg = e.parentElement.parentElement;
            if (e.children[0].checked == true) {
                tr_bg.classList.add("bg_success_shadow");
            } else {
                tr_bg.classList.remove("bg_success_shadow");
            }
        }

        // Modal - open details
        this.show_details = function (rent_id) {

            let modal_id = document.querySelector(".modal_rent_details");
            if (modal_id.classList.contains('hidden')) {
                modal_id.classList.remove('hidden');
                setTimeout(function () {
                    modal_id.classList.remove('visuallyhidden');

                    // load data
                    modal_details_rent.bl.load_data(rent_id);


                }, 20);
            } else {
                modal_id.classList.add('visuallyhidden');
                modal_id.addEventListener('transitionend', function (e) {
                    modal_id.classList.add('hidden');
                }, {
                    capture: false,
                    once: true,
                    passive: false
                });
            }
        }

        // Modal - close details
        this.modal_close = function (id) {

            let details_id = document.querySelector('.modal_rent_details');
            let modal_content = details_id.getElementsByClassName("modal_content")[0];
            let dismiss = details_id.querySelectorAll("[data-dismiss='modal']");
            for (let i = 0; i < dismiss.length; i++) {
                dismiss[i].onclick = function () {
                    hide_modal();
                }
            }

            // close modal when its not on target
            //document.addEventListener("mouseup", function (e) {
            //    if (!$(modal_content).is(e.target) && $(modal_content).has(e.target).length === 0) {
            //        if (!details_id.classList.contains("hidden")) {
            //            hide_modal();
            //        }
            //    }
            //});

            // close modal on enter and escape
            document.onkeydown = function (e) {
                if (!details_id.classList.contains("hidden")) {
                    if (e.keyCode === 27) {// || e.keyCode === 13) {
                        hide_modal();
                    }
                }
            };

            //closing modal on esc key
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape') {
                    hide_modal();
                }
            })

            // save rent on CTRL + S
            $(window).keydown(function (event) {

                var page = location.hash.slice(1);
                page = page.split('?')[0];
                if (page == 'calendar' || page == 'rents') {
                    if (!(event.which == 83 && event.ctrlKey)) return true;

                    modal_details_rent.bl.save_rent();
                    alert('Rezervacija uspiješno spremljena');
                    event.preventDefault();
                    return false;
                }

            });

            function hide_modal() {

                //var items_tbody = document.querySelectorAll('#modal_rent_details_tbody > tr')
                //for (var i = 1; i < items_tbody.length; i++) {
                //    items_tbody[i].remove();
                //}

                details_id.classList.add('visuallyhidden');
                details_id.addEventListener('transitionend', function (e) {
                    details_id.classList.add('hidden');
                }, {
                    capture: false,
                    once: true,
                    passive: false
                });

                // clearing payment method
                var el = document.getElementById('modal_paid');
                el.dataset.id = '';
                el.querySelector(".dropdown_name").innerHTML = "-";

                // clearing rent status
                var el = document.getElementById('modal_status');
                el.dataset.id = '';
                el.querySelector(".dropdown_name").innerHTML = '-';

                // clearing rent source
                var el = document.getElementById('modal_source');
                el.dataset.id = '';
                el.querySelector(".dropdown_name").innerHTML = '-';

                // clearing country of person
                var el = document.getElementById('modal_filter_country');
                el.dataset.id = '';
                el.querySelector(".dropdown_name").innerHTML = '-';



            }

        }

        // Load countries into dropdown menu
        this.load_guest_countries = function () {

            var countries = bl.countries.list();
            modal_edit_guest_details_countries_ul.innerHTML = '';
            modal_edit_guest_details_select_country_of_residence_ul.innerHTML = '';
            modal_add_guest_details_countries_ul.innerHTML = '';
            modal_add_guest_details_select_country_of_residence_ul.innerHTML = '';
            modal_add_guest_details_select_citizenship_ul.innerHTML = '';

            for (var c of countries) {
                var t = template_countries_list_add_guest.innerHTML;
                t = t.replace('${id}', c['id']);
                t = t.replace('${code1}', c['code1']);
                t = t.replace('${code2}', c['code2']);
                t = t.replace('${country}', c['country']);
                js.html.insertAdjacentHTML('modal_edit_guest_details_countries_ul', t);
                js.html.insertAdjacentHTML('modal_edit_guest_details_select_country_of_residence_ul', t);
                js.html.insertAdjacentHTML('modal_edit_guest_details_select_citizenship_ul', t);
                js.html.insertAdjacentHTML('modal_add_guest_details_countries_ul', t);
                js.html.insertAdjacentHTML('modal_add_guest_details_select_country_of_residence_ul', t);
                js.html.insertAdjacentHTML('modal_add_guest_details_select_citizenship_ul', t);
            }
        }

        // load rent status
        this.load_rent_status = function () {

            var status = bl.rents_status.list();
            modal_rent_details_rent_status.innerHTML = '';

            for (var s of status) {
                var t = template_rent_status_li.innerHTML;
                t = t.replace('${rent_status_id}', s['id']);
                t = t.replace('${color}', s['color']);
                t = t.replace('${name}', s['name']);
                t = t.replace('${name}', s['name']);
                js.html.insertAdjacentHTML('modal_rent_details_rent_status', t);
            }
        }

        // load rent sources
        this.load_rent_sources = function () {

            var sources = bl.rents_sources.list();
            modal_rent_details_rent_source_dropdown = '';

            for (var s of sources) {
                var t = template_rent_sources_li.innerHTML;
                t = t.replace('${apartment_rent_source_id}', s['id']);
                t = t.replace('${img}', s['icon']);
                t = t.replace('${icon}', s['icon']);
                t = t.replace('${name}', s['name']);
                js.html.insertAdjacentHTML('modal_rent_details_rent_source_dropdown', t);
            }

        }

        // load payment methods
        this.load_payment_methods = function () {

            var payment_methods = bl.payment_methods.list();
            modal_rent_details_payment_method_type = '';


            for (var pm of payment_methods) {
                var t = template_payment_methods_li.innerHTML;
                t = t.replace('${payment_method_id}', pm['id']);
                t = t.replace('${name}', pm['name']);
                t = t.replace('${name}', pm['name']);

                js.html.insertAdjacentHTML('modal_rent_details_payment_method_type', t);
            }

        }

        // loading object list
        this.load_object_list = function () {

            var object_list = bl.objects.list_get();
            modal_rent_details_object_list = '';

            for (var ol of object_list) {
                var t = template_object_list_li.innerHTML;
                t = t.replace('${object_id}', ol['id']);
                t = t.replace('${name}', ol['name']);
                t = t.replace('${color}', ol['color']);
                t = t.replace('${name}', ol['name']);
                js.html.insertAdjacentHTML('modal_rent_details_object_list', t);

            }
        }

        // loading countries into dropdown menu
        this.load_countries_list = function () {

            var countries_list = bl.countries.list();
            modal_rent_details_countries_list = '';

            for (var cl of countries_list) {
                var t = template_countries_list_li.innerHTML;
                t = t.replace('${country}', cl['country']);
                t = t.replace('${code2}', cl['code2']);
                t = t.replace('${id}', cl['id']);
                t = t.replace('${country}', cl['country']);
                js.html.insertAdjacentHTML('modal_rent_details_countries_list', t);

            }

        }

        // load days and price for every day
        this.load_prices_per_day = async function () {

            var url = '/api/rents_prices_days/list_day/' + modal_details_rent.rent_id;

            var response = await ajax.get(url);
            var response_json = JSON.parse(response);
            if (response_json.length == 0) {
                modal_details_rent.bl.generate_price_day();
                response = await ajax.get(url);
                response_json = JSON.parse(response);
            }

            modal_rent_details_list_per_day.innerHTML = '';

            for (var ppd of response_json) {
                var day = ppd['day'].split('T')[0];
                var t = template_list_per_day.innerHTML;
                t = t.replace('${id}', ppd['id']);
                t = t.replace('${day}', day.split('-')[2] + '.' + day.split('-')[1]);
                t = t.replace('${day}', ppd['day'].split('T')[0]);
                t = t.replace('${price}', ppd['price'].toFixed([2]));
                js.html.insertAdjacentHTML('modal_rent_details_list_per_day', t);

            }
        }

        // load list on invoices for one rent
        this.load_invoices_list = async function () {

            modal_rent_details_invoices_tbody.innerHTML = '';
            var invoices_list_string = await bl.invoices.list_by_rent(modal_details_rent.rent_id);
            var invoices_list = JSON.parse(invoices_list_string);



            for (var il of invoices_list) {

                var t = template_invoices_tr.innerHTML;

                t = t.replace('${date}', il['inv_date'].split('T')[0]);
                t = t.replace('${label}', il['number_code'] === null ? '-' : il['number_code']);
                t = t.replace('${type}', il['type']);
                t = t.replace('${price}', il['price'].toFixed([2]));

                js.html.insertAdjacentHTML('modal_rent_details_invoices_tbody', t);

            }

        }

        // loading messages into template
        this.load_messages = async function () {


            modal_rent_details_chat.innerHTML = '';
            var message_list_string = await bl.messages.conversation_messages(modal_details_rent.rent_id);
            var message_list = JSON.parse(message_list_string);

            var total = message_list.length - 1;

            for (var i = total; i > -1; i--) {

                if (message_list[i]['creator'] == 'user') {
                    var t = template_messages_send.innerHTML;
                }
                else {
                    var t = template_messages_recive.innerHTML;
                }

                t = t.replace('${date}', message_list[i]['created'].split('T')[0]);
                t = t.replace('${time}', message_list[i]['created'].split('T')[1]);
                t = t.replace('${text}', message_list[i]['message']);
                t = t.replace('${seen}', message_list[i]['seen'] == 'Y' ? 'fas fa-circle fa-xs' : '');
                js.html.insertAdjacentHTML('modal_rent_details_chat', t);
            }

        }

        // loading emails for one rent
        this.load_emails = async function () {

            modal_body_messages_tbody_id.innerHTML = '';
            var emails_list_string = await bl.email.list_of_emails(modal_details_rent.rent_id);
            var emails_list = JSON.parse(emails_list_string);

            for (var el of emails_list) {

                var t = template_log_email.innerHTML;

                t = t.replace('${subject}', el['subject']);
                t = t.replace('${created}', el['created'].split('T')[0]);
                t = t.replace('${time}', el['created'].split('T')[1]);
                t = t.replace('${email_status}', el['email_status'] == 'ok' ? 'fas fa-check' : 'fas fa-times');
                js.html.insertAdjacentHTML('modal_body_messages_tbody_id', t);

            }

        }

        // loading payment that are recived for rent
        this.load_payment_recive = async function () {

            modal_rent_details_payment_recive_tbody.innerHTML = '';
            var payment_recive_string = await bl.payment_recive.list_of_payment_recive(modal_details_rent.rent_id);
            var payment_recive = JSON.parse(payment_recive_string);

            for (var pr of payment_recive) {
                var t = template_payment_recive.innerHTML;

                t = t.replace('${created}', pr['created'].split('T')[0]);
                t = t.replace('${payment_method_type}', pr['payment_method_type']);
                t = t.replace('${price}', pr['price'].toFixed([2]));
                t = t.replace('${currency_code}', pr['currency_code']);
                js.html.insertAdjacentHTML('modal_rent_details_payment_recive_tbody', t);

            }



        }

        // hiding modal
        this.hide_modal = () => {
            document.getElementsByClassName('modal_rent_details')[0].classList.add('hidden');
        }

        // showing hidden menu of prices per day
        this.show_prices_per_day = function () {
            modal_rent_details_list_per_day
            if (modal_rent_details_list_per_day.classList.contains('hidden')) {
                modal_rent_details_list_per_day.classList.remove('hidden');
            } else {
                modal_rent_details_list_per_day.classList.add('hidden');
            }
        }

        // Load items into dropdown list
        this.load_items_list = function () {

            modal_rent_details_item_list.innerHTML = '';
            //var element_id = id;
            var items_list = bl.item.get();

            for (var il of items_list) {

                var t = template_items_list.innerHTML;
                t = t.replace('${name}', il['name']);
                t = t.replace('${name}', il['name']);
                t = t.replace('${id}', il['id']);

                js.html.insertAdjacentHTML('modal_rent_details_item_list', t);
            }

        }

        // insert new row of items
        this.insert_items_row = function (id) {

            var t = template_items_new_row.innerHTML;
            t = t.replace('${div_number}', modal_details_rent.items_number);
            t = t.replace('${ul_number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${number}', modal_details_rent.items_number);
            t = t.replace('${id}', id);
            js.html.insertAdjacentHTML('modal_rent_details_tbody', t);

            if (modal_details_rent.flag == 0) {
                document.getElementById('modal_rent_details_service_' + modal_details_rent.items_number).value = document.querySelector('#modal_rent_details_service > button').innerText;
                document.getElementById('modal_rent_details_item_price_' + modal_details_rent.items_number).value = modal_rent_details_item_price.value;
                document.getElementById('modal_rent_details_item_amount_' + modal_details_rent.items_number).value = modal_rent_details_item_amount.value;
                document.getElementById('modal_rent_details_item_tax_' + modal_details_rent.items_number).value = modal_rent_details_item_tax.value;
                document.getElementById('modal_rent_details_item_total_' + modal_details_rent.items_number).value = modal_rent_details_item_total.value;

                // clearing row for adding after items is add
                document.querySelector('#modal_rent_details_service > button').innerText = 'Choose item';
                modal_rent_details_item_price.value = '';
                modal_rent_details_item_amount.value = '';
                modal_rent_details_item_tax.value = '';
                modal_rent_details_item_total.value = '';
            }

            modal_details_rent.items_number++;

            modal_details_rent.bl.total_item_price();
            modal_details_rent.bl.calculate_total_items_prices();
        }

        // loading guest into list of selected rent
        this.load_guests = async () => {

            var url = '/api/guests/list_guest_by_rent_id/' + modal_details_rent.rent_id;
            var countries = bl.countries.list();
            var guests_list = await ajax.get(url);
            var guests_list_json = JSON.parse(guests_list);
            modal_rent_details_guest_tbody.innerHTML = '';
            for (var gl of guests_list_json) {
                var t = template_guests_list.innerHTML;
                for (var c of countries) {
                    if (gl['residence_country'] == null) {
                        t = t.replace('${code2}', '');
                    }
                    if (c['code1'] == gl['residence_country'].toUpperCase()) {
                        t = t.replace('${code2}', c['code2']);
                    }
                }
                t = t.replace('${id}', gl['id']);
                t = t.replace('${name_last}', gl['name_last']);
                t = t.replace('${name_first}', gl['name_first']);
                t = t.replace('${price}', gl['price_sum_local'].toFixed([2]));
                //t = t.replace('${code2}', gl['code2']);
                t = t.replace('${days}', gl['days'] == null ? '-' : gl['days']);
                t = t.replace('${years}', gl['years'] == null ? '-' : gl['years']);
                t = t.replace('${checked}', gl['sync'] == 'Y' ? 'checked' : '');

                js.html.insertAdjacentHTML('modal_rent_details_guest_tbody', t);
            }
        }

        // loading guest that selected from list of guests to editing form
        this.load_selected_guest = async function (id) {

            modal_details_rent.guest_id = id;

            var url = '/api/guests/get_guest_by_guest_id/' + id;
            var response_string = await ajax.get(url);
            var response = JSON.parse(response_string)[0];
            document.querySelector('#modal_body_edit_guest_tab').click();

            //console.log(response);
            response['checkin'] == 'Y' ? modal_rent_details_evisitor_icon.classList.remove('hidden') : '';

            // guest
            modal_edit_guest_details_first_name.value = response['name_first'];
            modal_edit_guest_details_last_name.value = response['name_last'];
            modal_rent_details_guest_visible_on_invoice.checked = response['visible_on_invoice'] == 'Y' ? true : false;
            modal_rent_details_city_tax.checked = response['city_tax'] == 'Y' ? true : false;
            modal_edit_guest_details_date_from.value = response['date_from'].split('T')[0];
            modal_edit_guest_details_date_until.value = response['date_until'].split('T')[0];
            modal_edit_guest_details_note.value = response['note'];
            modal_edit_guest_details_sex_type_M.checked = response['gender'] == 'muški' ? true : false;
            modal_edit_guest_details_sex_type_F.checked = response['gender'] == 'ženski' ? true : false;

            // guest evisitor
            modal_edit_guest_details_date_birth.value = response['birth_date'].split('T')[0];
            modal_edit_guest_details_country.dataset.code1;
            modal_edit_guest_details_city.value = response['birth_city'];
            modal_edit_guest_details_document_number.value = response['document_number'];
            modal_edit_guest_details_place_of_residence.value = response['residence_city'];

            if (response['country_code_iso'] != null && response['country_code_iso'] != '') {
                document.querySelector(`#modal_edit_guest_details_countries_ul > li[data-code1=${response['country_code_iso']}]`).click();
            }
            if (response['citizenship'] != null && response['citizenship'] != '') {
                document.querySelector(`#modal_edit_guest_details_select_citizenship_ul > li[data-code1=${response['citizenship'].toUpperCase()}]`).click();
            }
            if (response['residence_country'] != null && response['residence_country'] != '') {
                document.querySelector(`#modal_edit_guest_details_select_country_of_residence_ul > li[data-code1=${response['residence_country'].toUpperCase()}]`).click();
            }
            if (response['document_type'] != null && response['document_type'] != '') {
                document.querySelector(`#modal_edit_guest_details_type_of_document_ul > li[data-id="${response['document_type']}"]`).click();
            }
            if (response['arrival_organisation'] != null && response['arrival_organisation'] != '') {
                document.querySelector(`#modal_edit_guest_details_select_arrival_organization_ul  > li[data-id="${response['arrival_organisation']}"]`).click();
            }
            if (response['tt_payment_category'] != null && response['tt_payment_category'] != '') {
                document.querySelector(`#modal_edit_guest_details_category_ul > li[data-id="${response['tt_payment_category']}"]`).click();
            }

        }

        // search for first 10 exisiting guests
        this.search_first_10 = async function () {

            var guest = {};
            guest.id = bl.workers.current_user_id();
            guest.name_first = modal_add_guest_details_first_name.value;
            guest.name_last = modal_add_guest_details_last_name.value;
            guest.document_number = modal_add_guest_details_document_number.value;

            var url = '/api/guests/search_limit_10_json/';
            var response_json = await ajax.post_json(url, guest);

            var countries = bl.countries.list();
            modal_rent_details_existing_guest_div.innerHTML = '';

            for (var gl of response_json) {
                var t = template_existing_guest.innerHTML;
                for (var c of countries) {
                    if (gl['residence_country'] == null) {
                        t = t.replace('${code2}', '');
                    } else if (c['code1'] == gl['residence_country'].toUpperCase()) {
                        t = t.replace('${code2}', c['code2']);
                    }
                }
                t = t.replace('${document_number}', gl['document_number']);
                t = t.replace('${name_last}', gl['name_last']);
                t = t.replace('${name_first}', gl['name_first']);
                t = t.replace('${id}', gl['id']);

                js.html.insertAdjacentHTML('modal_rent_details_existing_guest_div', t);
            }
        }

        // loading existing guest to add guest form
        this.load_existing_guest = async function (id) {

            var url = '/api/guests/get_guest_by_guest_id/' + id;

            var response = await ajax.get(url);
            var response_json = JSON.parse(response)[0];

            modal_add_guest_details_first_name.value = response_json['name_first'];
            modal_add_guest_details_last_name.value = response_json['name_last'];
            modal_add_guest_details_date_from.value = response_json['date_from'].split('T')[0];
            modal_add_guest_details_date_until.value = response_json['date_until'].split('T')[0];
            modal_add_guest_details_city.value = response_json['birth_city'];
            modal_add_guest_details_date_birth.value = response_json['birth_date'];
            modal_add_guest_details_document_number.value = response_json['document_number'];
            modal_add_guest_details_place_of_residence.value = response_json['residence_city'];
            modal_add_guest_details_sex_type_M.checked = response_json['gender'] == 'muški' ? true : false;
            modal_add_guest_details_sex_type_F.checked = response_json['gender'] == 'ženski' ? true : false;

            if (response_json['country_code_iso'] != null && response_json['country_code_iso'] != '') {
                document.querySelector(`#modal_add_guest_details_countries_ul > li[data-code1=${response_json['country_code_iso']}]`).click();
            }
            if (response_json['citizenship'] != null && response_json['citizenship'] != '') {
                document.querySelector(`#modal_add_guest_details_select_citizenship_ul > li[data-code1=${response_json['citizenship'].toUpperCase()}]`).click();
            }
            if (response_json['residence_country'] != null && response_json['residence_country'] != '') {
                document.querySelector(`#modal_add_guest_details_select_country_of_residence_ul > li[data-code1=${response_json['residence_country'].toUpperCase()}]`).click();
            }
            if (response_json['document_type'] != null && response_json['document_type'] != '') {
                document.querySelector(`#modal_add_guest_details_type_of_document_ul > li[data-id="${response_json['document_type']}"]`).click();
            }


        }


        this.select_on_mobile = () => {

            modal_rent_details_items_table.classList.add('mobile_overflow_select');
            modal_rent_details_items_table.classList.add('pb_16_mobile');
        }
    }

    modal_details_rent.bl = new function () {

        // generate day between dates that are selected on calendar and calculate price for every day
        this.generate_price_day = async () => {

            var url = '/api/rents_prices_days/generate_days/' + modal_details_rent.rent_id;

            await ajax.get(url);
        }

        // save price for every day
        this.save_prices_per_day = async () => {

            var prices = {};
            //var url = '/api/rents_prices_days/save_day';
            //prices.rent_id = modal_details_rent.rent_id;

            var list_lenght = document.querySelectorAll('.list_per_day > div').length;
            var prices_list = bl.rents_prices_day.list();
            for (var i = 0; i < list_lenght; i++) {
                prices.date = document.querySelector(`input[data-id='${prices_list[i]['id']}']`).dataset.date;
                prices.price = document.querySelector(`input[data-id='${prices_list[i]['id']}']`).value;
            }

            //var response = ajax.post(url, prices);
            //response.then(function (text) {
            //});
        }

        // Loading data for one rent modal_rent_details_advance_percent
        this.load_data = async (rent_id) => {

            // on open modal selecting home tab
            document.querySelectorAll('.modal_ul > li > a')[0].click()

            modal_details_rent.rent_id = rent_id;

            bl.workers.current_rent_id(rent_id);

            // setup url for mails preview
            modal_rent_details_confirmation_preview.href = '/rents/email/' + modal_details_rent.rent_id;
            modal_rent_details_voucher_preview.href = 'rents/email_voucher/' + modal_details_rent.rent_id;
            modal_rent_details_offer_preview.href = 'rents/email_offer/' + modal_details_rent.rent_id;

            var url = '/api/rents/get/' + modal_details_rent.rent_id;

            var response = await ajax.get(url);
            var data = JSON.parse(response);

            let from = data[0]['from_date'].split('T')[0];
            let until = data[0]['until_date'].split('T')[0];

            console.log(data);

            guest_portal_btn.href = 'https://rent.zaggy.net/' + data[0]['guid'];

            // setting up global currency
            modal_details_rent.curreny_id = data[0]['currency_id'];
            modal_details_rent.exchange = data[0]['exchange'];

            modal_details_rent.item_id = data[0]['item_id'];

            if (!data[0]['rent_source_icon']) {
                data[0]['rent_source_icon'] = "syncbeds";
            }

            document.getElementById("modal_rent_details_image").src = `./assets/images/icons/portals/${data[0]['rent_source_icon']}.svg`;

            modal_rent_details_rent_id.innerHTML = data[0]['id'];
            modal_rent_details_in_advance.value = data[0]['in_advance'] != null ? data[0]['in_advance'].toFixed([2]) : data[0]['in_advance'];
            modal_rent_details_price.innerText = data[0]['price_sum'] != null ? data[0]['price_sum'].toFixed([2]) : data[0]['price_sum'];
            modal_rent_details_price_currency.innerText = data[0]['label'];
            modal_rent_details_contact_name.value = data[0]['contact_name'];
            modal_rent_details_contact_email.value = data[0]['contact_email'];
            modal_rent_details_contact_tel.value = data[0]['contact_tel'];
            modal_rent_details_rent_pets.value = data[0]['rent_pets'];
            modal_rent_details_rent_children.value = data[0]['rent_children'];
            modal_rent_details_rent_adults.value = data[0]['rent_adults'];
            modal_rent_details_exchange.value = data[0]['exchange'].toFixed([2]);
            modal_rent_details_parking.style.opacity = data[0]['parking'] == 'Y' ? '1' : '0.1';
            modal_details_rent.object_id = data[0]['object_id'];
            modal_rent_details_by_day.value = (data[0]['price'] / data[0]['days']).toFixed([2]);
            modal_rent_details_by_person.value = (data[0]['price'] / (data[0]['rent_adults'] + data[0]['rent_children'])).toFixed([2]);
            modal_rent_details_tabs_note.value = data[0]['note'];
            modal_rent_details_tabs_short_note.value = data[0]['note_short'];
            modal_rent_details_tabs_note_owner.value = data[0]['note_owner'];
            modal_rent_details_tabs_price_note.value = data[0]['apartment_note'];
            modal_rent_details_rent_date_from.innerHTML = from;
            modal_rent_details_rent_date_until.innerHTML = until;
            //modal_rent_details_rent_date_from.innerHTML = data[0]['from_date'].split('T')[0];
            //modal_rent_details_rent_date_until.innerHTML = data[0]['until_date'].split('T')[0];
            modal_rent_details_discount.value = data[0]['discount'];
            modal_rent_details_days.value = data[0]['days'];
            modal_rent_details_average_price.value = Number(data[0]['price'] / data[0]['days']).toFixed(2);
            modal_rent_details_price_difference.value = data[0]['price_difference'] != null ? data[0]['price_difference'].toFixed([2]) : data[0]['price_difference'];
            modal_rent_details_price_full.value = data[0]['price'] != null ? data[0]['price'].toFixed([2]) : data[0]['price'];
            modal_rent_details_advance_percent.innerText = !data[0]['advance_percent'] == false ? '(' + data[0]['advance_percent'].toFixed([2]) + '%)' : '(' + data[0]['advance_percent'].toFixed([2]) + '%)';
            modal_rent_details_in_advance_1.innerText = data[0]['in_advance'];
            modal_rent_detail_in_advance_1_currency.innerText = data[0]['label'];
            modal_details_rent_nights.value = data[0]['days'];
            modal_rent_details_price_sum.value = data[0]['price_sum'] != null ? data[0]['price_sum'].toFixed([2]) : data[0]['price_sum'];
            modal_rent_details_price_extra_price.value = data[0]['price_extra_price'] != null ? data[0]['price_extra_price'].toFixed([2]) : data[0]['price_extra_price'];
            modal_rent_details_list_per_day_sum.value = (data[0]['price_sum'] / data[0]['days']).toFixed([2]);

            var advance_percent = data[0]['advance_percent'];
            modal_rent_details_advance_percent_new.value = !advance_percent == false ? data[0]['advance_percent'].toFixed([2]) : data[0]['advance_percent'];
            modal_rent_details_price_after_discount.innerText = data[0]['price_full'] != null ? data[0]['price_full'].toFixed([2]) : data[0]['price_full'];

            modal_details_rent.days = data[0]['days'];
            modal_details_rent.curreny_label = data[0]['currency_code'];

            // date when reservation is created
            var date_string = data[0]['created'].split('T')[0];
            var date_created = new Date(date_string);
            modal_created_id.innerText = date_created.getDate() + '.' + (date_created.getMonth() + 1) + '.' + date_created.getFullYear() + '.';


            // imitation of click for dropdown menu's
            let select = data[0]['rent_source_icon'] || "";
            let source_el = document.querySelector(`li[data-name='${select}']`);
            if (source_el) source_el.click();

            let select_status = data[0]['rent_status'] || "";
            let status_el = document.querySelector(`li[data-name='${select_status}']`);
            if (status_el) status_el.click();

            let select_payment_name = data[0]['rent_payment_name'] || "";
            let payment_name_el = document.querySelector(`li[data-name='${select_payment_name}']`);
            if (payment_name_el) payment_name_el.click();


            let select_object_name = data[0]['object_name'] || "";
            let object_name_el = document.querySelector(`li[data-name='${select_object_name}']`);
            if (object_name_el) object_name_el.click();

            let select_country = data[0]['contact_country_id'] || "";
            let country_el = document.querySelector(`#modal_rent_details_countries_list > li[data-id='${select_country}']`);
            if (country_el) country_el.click();


            if (modal_rent_details_currency.innerHTML == 'HRK') {

                modal_rent_details_by_day.value = (data[0]['price'] / (data[0]['days'] * data[0]['exchange'])).toFixed([2]);
                modal_rent_details_by_person.value = ((data[0]['price'] / (data[0]['rent_adults'] + data[0]['rent_children'])) * data[0]['exchange']).toFixed([2]);
                modal_rent_details_price.innerText = (data[0]['price'] * data[0]['exchange']).toFixed([2]);
                modal_rent_details_in_advance_1.innerText = (data[0]['in_advance'] * data[0]['exchange']).toFixed([2]);

            }

            // Setup calendar and initial dates
            await modal_details_rent.ui.calendar_set();
            modal_details_rent.ui.fp_calendar.setDate([new Date(from), new Date(until)]);

            modal_details_rent.ui.modal_details_show_calendar("modal_period");

            var payment_method_type = data[0]['payment_method_type'] || '';
            let payment_method_type_select = [...document.querySelectorAll('#modal_rent_details_payment_method_type > .dropdown_li .name')]
                .filter(
                    el => el.innerHTML.trim().toUpperCase() == payment_method_type.toUpperCase()
                );

            if (payment_method_type_select.length != 0) {
                payment_method_type_select[0].click();
            }

            // changing currency label
            modal_rent_details_average_price_label.innerText = modal_details_rent.curreny_label;
            modal_rent_details_price_full_label.innerText = modal_details_rent.curreny_label;
            modal_rent_details_discount_price_label.innerText = modal_details_rent.curreny_label;
            modal_rent_details_price_extra_price_label.innerText = modal_details_rent.curreny_label;
            modal_rent_details_list_per_day_sum_label.innerText = modal_details_rent.curreny_label;
            modal_rent_details_price_sum_label.innerText = modal_details_rent.curreny_label;
            modal_rent_details_in_advance_label.innerText = modal_details_rent.curreny_label;

            modal_details_rent.bl.rent_items_load();

            modal_details_rent.ui.load_prices_per_day();
            modal_details_rent.ui.load_guests();
            bl.rents_prices_day.load(rent_id);

            // seting up global variables
            modal_details_rent.date_from = modal_rent_details_rent_date_from.innerText;
            modal_details_rent.date_until = modal_rent_details_rent_date_until.innerText;

        }

        // Saving changes into object
        this.save_rent = async () => {

            ui.content_loading('modal_rent_details_content_loading');

            var rent = {};

            rent.object_id = modal_details_rent.object_id.toString();
            rent.rent_id = modal_rent_details_rent_id.innerHTML;
            rent.in_advance = modal_rent_details_in_advance_1.innerText;
            rent.price = modal_rent_details_price.innerHTML;
            rent.contact_name = modal_rent_details_contact_name.value;
            rent.contact_email = modal_rent_details_contact_email.value;
            rent.contact_tel = modal_rent_details_contact_tel.value;
            rent.rent_pets = modal_rent_details_rent_pets.value;
            rent.rent_children = modal_rent_details_rent_children.value
            rent.rent_adults = modal_rent_details_rent_adults.value;
            rent.exchange = modal_rent_details_exchange.value;
            rent.note = modal_rent_details_tabs_note.value;
            rent.note_short = modal_rent_details_tabs_short_note.value;
            rent.note_owner = modal_rent_details_tabs_note_owner.value;
            rent.apartment_note = modal_rent_details_tabs_price_note.value;
            rent.rent_status_id = document.getElementById('modal_status').dataset.id;
            rent.rent_source_id = document.getElementById('modal_source').dataset.id;
            rent.payment_method_id = document.getElementById('modal_paid').dataset.id;
            rent.from_date = modal_rent_details_rent_date_from.innerHTML;
            rent.until_date = modal_rent_details_rent_date_until.innerHTML;
            rent.contact_country_id = document.getElementById('modal_filter_country').dataset.id;
            rent.object_id = document.getElementById('modal_filter_object').dataset.id;
            rent.object_name = document.getElementById('modal_filter_object').dataset.name;

            var url = '/api/rents/save';
            var response = await ajax.post_json(url, rent);

            ui.content_loading_hide('modal_rent_details_content_loading');
            modal_details_rent.ui.hide_modal();

            // refresh to see new reservations
            if (location.hash.split('?')[0] == '#calendar') {
                calendar.bl.refresh_page();
            } else {
                rents.bl.rents_load();
            }

        }

        // delete reservations
        this.delete_reservation = async () => {

            ui.content_loading('modal_rent_details_content_loading');

            var worker = bl.workers.current_worker_id();
            var url = '/api/rents/del/' + `${modal_details_rent.rent_id}?worker_id=${worker}`;
            var response = await ajax.get(url);

            ui.content_loading_hide('modal_rent_details_content_loading');
            modal_details_rent.ui.hide_modal();
            var current_page = page.get_current_page();

            if (current_page == 'calendar') {

                calendar.bl.refresh_page();

            }

        }

        // Sending chat message from ui to database
        this.chat_messages = () => {

            var chat = {};

            chat.worker_id = bl.workers.current_worker_id();
            chat.rent_id = modal_details_rent.rent_id;
            chat.object_id = modal_details_rent.object_id;
            chat.creator = 'user';
            chat.source = 'web';
            chat.source_info = 'light.zaggy.net';
            chat.messages = document.getElementById('model_rent_details_chatbox').value;
            model_rent_details_chatbox.value = '';

            var url = '/api/messages/save';
            var response = ajax.post_json(url, chat);

            response.then(function (text) {
                modal_details_rent.ui.load_messages();
            });


        }

        // save all changes from tab "Price"
        this.save_prices = async () => {

            var prices = {};
            prices.rents = {};
            prices.rents_items = [];
            prices.rents_prices_days = [];

            //var url = '/api/rents/prices_save_json/';

            //var response = await ajax.post(url);

            // rents
            prices.rents.rent_id = modal_details_rent.rent_id;
            prices.rents.worker_id = bl.workers.current_worker_id();
            prices.rents.days = modal_details_rent_nights.value;
            prices.rents.average_price = modal_rent_details_average_price.value;
            prices.rents.price_full = modal_rent_details_price_full.value;
            prices.rents.discount = modal_rent_details_discount.value;
            prices.rents.price_extra_price = modal_rent_details_price_extra_price.value;
            prices.rents.price_sum = modal_rent_details_price_sum.value;
            prices.rents.in_advance = modal_rent_details_in_advance.value;
            prices.rents.price_difference = modal_rent_details_price_difference.value;
            prices.rents.advance_percent = modal_rent_details_advance_percent_new.value;
            prices.rents.price = modal_rent_details_price_full.value;

            // rents prices per day
            var days = document.querySelectorAll('#modal_rent_details_list_per_day > div > .form-group > input');

            for (var d of days) {
                var json = {};
                json.day = d.dataset.date;
                json.price = d.value;

                prices.rents_prices_days.push(json);
            }

            // rents items - add existign items
            var items = document.querySelectorAll('#modal_rent_details_tbody > tr');
            var id;

            for (var i = 1; i < items.length; i++) {
                id = items[i].id.split('_')[4];
                var json = {};
                json.price = document.getElementById('modal_rent_details_item_price_' + id).value;
                json.name = document.getElementById('modal_rent_details_service_' + id).value;
                json.vat = document.getElementById('modal_rent_details_item_tax_' + id).value;
                json.quantity = document.getElementById('modal_rent_details_item_amount_' + id).value;
                json.quantity = document.getElementById('modal_rent_details_item_amount_' + id).value;
                json.id = document.getElementById('modal_rent_details_tr_' + id).dataset.id;

                if (json.name != '') {
                    prices.rents_items.push(json);
                }

            }

            var url = '/api/rents/price_save';
            var response = await ajax.post_json(url, prices);

        }

        // calculating advance price after changing advance percentage
        this.change_advance_percent = () => {

            modal_rent_details_in_advance.value = (modal_rent_details_price_sum.value * (modal_rent_details_advance_percent_new.value / 100)).toFixed([2]);
            modal_rent_details_price_difference.value = (modal_rent_details_price_sum.value - modal_rent_details_in_advance.value).toFixed([2]);
        }

        // calculating advance percentage after changing advance price
        this.change_advance_price = () => {

            if (modal_rent_details_in_advance.value != 0 && modal_rent_details_price_sum.value != 0) {
                modal_rent_details_advance_percent_new.value = ((modal_rent_details_in_advance.value / modal_rent_details_price_sum.value) * 100).toFixed([2]);
                modal_rent_details_price_difference.value = (modal_rent_details_price_sum.value - modal_rent_details_in_advance.value).toFixed([2]);
            }

        }

        // calculating total price of all items
        this.change_items_total_price = (id) => {

            if (modal_rent_details_item_tax.value == '' && modal_rent_details_item_amount.value == '') {
                modal_rent_details_item_tax.value = 0;
                modal_rent_details_item_amount.value = 1;
            }


            if (id == 'modal_rent_details_tr') {
                var total_price = document.getElementById('modal_rent_details_item_price').value * document.getElementById('modal_rent_details_item_amount').value;

                var vat = document.getElementById('modal_rent_details_item_tax').value;
                if (vat != 0) {
                    total_price = total_price * (1 + vat / 100);
                    document.getElementById('modal_rent_details_item_total').value = total_price;
                }

                document.getElementById('modal_rent_details_item_total').value = total_price.toFixed([2]);
            } else {
                numb = id.split('_')[4];

                var total_price = document.getElementById('modal_rent_details_item_price_' + numb).value * document.getElementById('modal_rent_details_item_amount_' + numb).value;

                var vat = document.getElementById('modal_rent_details_item_tax_' + numb).value;
                if (vat != 0) {
                    total_price = total_price * (1 + vat / 100);
                    document.getElementById('modal_rent_details_item_total_' + numb).value = total_price;
                }

                document.getElementById('modal_rent_details_item_total_' + numb).value = total_price.toFixed([2]);
            }


            this.total_item_price();

        }

        // price for all items
        this.total_item_price = () => {

            // sum prices of items to get total price for items
            var items = document.querySelectorAll('#modal_rent_details_tbody > tr');

            var total_price = 0;
            for (i = 0; i < items.length - 1; i++) {
                total_price = total_price + parseFloat(document.getElementById('modal_rent_details_item_total_' + i).value);
                //TODO: Dodati provjeru za nulu
                //total_price = total_price + parseFloat(document.getElementById('modal_rent_details_item_total_' + id).value);
            }

            document.getElementById('modal_rent_details_price_extra_price').value = total_price;
            this.calculate_total_items_prices();
        }

        // deleting one row in items list
        this.delete_row = async (id, rent_item_id) => {

            document.getElementById(id).remove();
            var url = '/api/rents_items/del/' + rent_item_id;
            var response = await ajax.post_json(url);

        }

        // calculate total items
        this.calculate_total_items_prices = () => {

            modal_rent_details_price_sum.value = parseFloat(modal_rent_details_price_full.value) + parseFloat(modal_rent_details_price_extra_price.value);
            modal_rent_details_list_per_day_sum.value = (parseFloat(modal_rent_details_price_sum.value) / parseFloat(modal_details_rent_nights.value)).toFixed(2);
            this.calculate_discount();

            this.change_advance_price();

            //modal_rent_details_list_per_day_sum.value = modal_rent_details_price_sum.value / modal_details_rent_nights;
        }

        // calculate discount on change
        this.calculate_discount = () => {

            var full_price = parseFloat(modal_rent_details_price_full.value)
            var discount = full_price * (1 - parseFloat(modal_rent_details_discount.value) / 100);
            var price = (full_price - (full_price - discount)).toFixed([2]);
            modal_rent_details_discount_price.value = -Math.abs((full_price - discount).toFixed([2]));

            modal_rent_details_price_after_discount.innerText = price;

            modal_rent_details_price_sum.value = parseFloat(modal_rent_details_price_after_discount.innerText) + parseFloat(modal_rent_details_price_extra_price.value);
        }

        // editing guest
        this.edit_guest = async (id) => {

            var guest = {};

            // guest
            guest.name_first = modal_edit_guest_details_first_name.value;
            guest.name_last = modal_edit_guest_details_last_name.value;
            guest.visible_on_invoice = modal_rent_details_guest_visible_on_invoice.checked == true ? 'Y' : 'N';
            guest.city_tax = modal_rent_details_city_tax.checked == true ? 'Y' : 'N';
            guest.date_from = modal_edit_guest_details_date_from.value;
            guest.date_until = modal_edit_guest_details_date_until.value;
            guest.note = modal_edit_guest_details_note.value;

            // guest evisitor
            guest.birth_date = modal_edit_guest_details_date_birth.value;
            guest.birth_country = modal_edit_guest_details_country.dataset.code1;
            guest.birth_city = modal_edit_guest_details_city.value;
            guest.document_number = modal_edit_guest_details_document_number.value;
            guest.document_type = modal_edit_guest_details_type_of_document_btn.dataset.id;
            guest.gender = modal_edit_guest_details_sex_type_M.checked == true ? 'muški' : 'ženski';
            guest.arrival_organisation = modal_edit_guest_details_select_arrival_organization_btn.dataset.id;
            guest.citizenship = modal_edit_guest_details_select_citizenship_btn.dataset.code1;
            guest.residence_city = modal_edit_guest_details_place_of_residence.value;
            guest.residence_country = modal_edit_guest_details_select_country_btn.dataset.code1;
            guest.tt_payment_category = modal_edit_guest_details_category.dataset.id;
            guest.offered_service_type = 'noćenje';
            //guest.category_id = modal_edit_guest_details_category.dataset.id;
            guest.guest_id = modal_details_rent.guest_id;

            // api call for saving guest to guests table and to guests_evisitor
            url = '/api/guests/save_guest/';
            response = await ajax.post_json(url, guest);

            alert('Gost uspiješno spremljen');

            this.clear_edit_guest();
        }

        // clearing all from edit guest tab
        this.clear_edit_guest = () => {
            modal_edit_guest_details_first_name.value = '';
            modal_edit_guest_details_last_name.value = '';
            modal_edit_guest_details_city.value = '';
            modal_edit_guest_details_city.dataset.id = '';
            modal_edit_guest_details_select_arrival_organization_btn.value = '';
            modal_edit_guest_details_select_arrival_organization_btn.dataset.id = '';
            modal_edit_guest_details_select_citizenship_btn.innerText = '';
            modal_edit_guest_details_select_citizenship_btn.dataset.id = '';
            modal_edit_guest_details_select_citizenship_btn.dataset.code1 = '';
            modal_edit_guest_details_document_number.value = '';
            modal_edit_guest_details_country.innerText = '';
            modal_edit_guest_details_country.dataset.id = '';
            modal_edit_guest_details_note.value = '';
            modal_edit_guest_details_country.innerText = '';
            modal_edit_guest_details_category.innerText = '';
            modal_edit_guest_details_country.innerText = '';
            modal_edit_guest_details_select_country_btn.innerText = '';
            modal_edit_guest_details_place_of_residence.value = '';
            modal_edit_guest_details_date_birth.value = '';
            modal_edit_guest_details_date_from.value = '';
            modal_edit_guest_details_date_until.value = '';
            modal_edit_guest_details_type_of_document_btn.innerText = '';
            modal_edit_guest_details_type_of_document_btn.dataset.id = '';
            modal_rent_details_city_tax.checked = false;
            modal_rent_details_guest_visible_on_invoice.checked = false;

            modal_details_rent.ui.load_guests();
            document.querySelector('#modal_body_guests_list_tab').click();

        }

        // adding new guest to database
        this.add_guest = async () => {

            var guest = {};

            guest.name_first = modal_add_guest_details_first_name.value;
            guest.name_last = modal_add_guest_details_last_name.value;
            guest.birth_date = modal_add_guest_details_date_birth.value;
            guest.birth_country = modal_add_guest_details_country.dataset.code1;
            guest.birth_city = modal_add_guest_details_city.value;
            guest.document_number = modal_add_guest_details_document_number.value;
            guest.document_type = modal_add_guest_details_country_btn.dataset.id;
            guest.citizenship = modal_add_guest_details_select_citizenship_btn.dataset.code1;
            guest.residence_city = modal_add_guest_details_place_of_residence.value;
            guest.residence_country = modal_add_guest_details_select_country_btn.dataset.code1;
            guest.gender = modal_add_guest_details_sex_type_M.checked == true ? 'muški' : 'ženski';
            guest.date_from = modal_add_guest_details_date_from.value == '' ? alert('Date from is required') : modal_add_guest_details_date_from.value;
            guest.date_until = modal_add_guest_details_date_until.value == '' ? alert('Date until is required') : modal_add_guest_details_date_until.value;

            // api call for creating row inside guests table
            var url = '/api/guests/add/' + modal_details_rent.rent_id;
            var response = await ajax.get_json(url);

            guest.guest_id = response.substring(1, response.length - 1);;

            // api call for creating row inside guests_evsitor table
            url = '/api/guests/add_evisitor/' + guest.guest_id;
            response = await ajax.get(url);

            // api call for saving guest to database
            url = '/api/guests/save_guest/';
            response = await ajax.post_json(url, guest);

            this.clear_add_guest();
        }

        // add to database evisitor
        this.add_guest_to_evisitor = async () => {
            // api call for creating row inside guests table
            var url = '/api/guests/add_evisitor/' + modal_details_rent.guest_id;
            var response = await ajax.post_json(url);
        }


        // clearing all from add guest tab
        this.clear_add_guest = () => {
            modal_add_guest_details_first_name.value = '';
            modal_add_guest_details_last_name.value = '';
            modal_add_guest_details_city.value = '';
            modal_add_guest_details_city.dataset.id = '';
            modal_add_guest_details_select_citizenship_btn.innerText = '';
            modal_add_guest_details_select_citizenship_btn.dataset.id = '';
            modal_add_guest_details_select_citizenship_btn.dataset.code1 = '';
            modal_add_guest_details_document_number.value = '';
            modal_add_guest_details_country_btn.innerText = '';
            modal_add_guest_details_country_btn.dataset.id = '';
            modal_add_guest_details_country.innerText = '';
            modal_add_guest_details_select_country_btn.innerText = '';
            modal_add_guest_details_place_of_residence.value = '';
            modal_add_guest_details_date_birth.value = '';
            modal_add_guest_details_sex_type_M.checked = false
            modal_add_guest_details_sex_type_F.checked = false
            modal_add_guest_details_date_from.value = '';
            modal_add_guest_details_date_until.value = '';

            modal_details_rent.ui.load_guests();
            document.querySelector('#modal_body_guests_list_tab').click();
        }

        // on change price per day changing prices in "prices per day"
        this.calculate_prices_per_day = () => {

            modal_rent_details_price_full.value = Number(modal_rent_details_average_price.value * modal_rent_details_days.value).toFixed(2);
            var days = document.querySelectorAll('#modal_rent_details_list_per_day > div > div > input');
            for (var d of days) {
                d.value = Number(modal_rent_details_average_price.value).toFixed(2);
            }

            modal_rent_details_price_after_discount.innerText = 'Price: ' + Number((modal_rent_details_price_full.value + modal_rent_details_discount_price.value)).toFixed(2);

            modal_details_rent.bl.price_change();

        }

        // on change price changing price per day
        this.price_change = () => {

            modal_rent_details_average_price.value = modal_rent_details_price_full.value / parseInt(modal_details_rent.days);
            modal_rent_details_price_sum.value = parseFloat((modal_rent_details_price_full.value + modal_rent_details_price_extra_price.value)).toFixed(2);

            modal_rent_details_price_full.value = Number(modal_rent_details_average_price.value * modal_rent_details_days.value).toFixed(2);
            var days = document.querySelectorAll('#modal_rent_details_list_per_day > div > div > input');
            for (var d of days) {
                d.value = Number(modal_rent_details_average_price.value).toFixed(2);
            }

            modal_rent_details_price_after_discount.innerText = 'Price: ' + Number((modal_rent_details_price_full.value + modal_rent_details_discount_price.value)).toFixed(2);

        }

        // on change prices for specifice day changing price
        this.price_change_day = () => {

            var price = 0;
            // get all days
            var prices_days = document.querySelectorAll('#modal_rent_details_list_per_day > div > div >input');
            for (var d of prices_days) {
                price = price + parseFloat(d.value);
            }

            modal_rent_details_price_full.value = Number(price).toFixed(2);

            modal_details_rent.bl.price_change();
        }

        // loading rent items list from database
        this.rent_items_load = async () => {

            var trs = document.querySelectorAll('#modal_rent_details_tbody > tr')
            for (var tr of trs) {
                if (!tr.dataset.id == false) {
                    tr.remove();
                }
            }



            // selecting items for rents
            var url = '/api/rents_items/list/' + modal_details_rent.rent_id;
            var rents_items = await ajax.get(url);
            var json_rents_items = JSON.parse(rents_items);

            // id for tr
            modal_details_rent.items_number = 0;

            var numb = 0;

            // add new items
            for (var item of json_rents_items) {

                modal_details_rent.flag = 1;
                modal_details_rent.ui.insert_items_row(item['id']);
                //var id = document.getElementById('modal_rent_details_tr_' + numb);
                var price = document.getElementById('modal_rent_details_item_price_' + numb);
                var tax = document.getElementById('modal_rent_details_item_tax_' + numb);
                var amount = document.getElementById('modal_rent_details_item_amount_' + numb);
                var total = document.getElementById('modal_rent_details_item_total_' + numb);
                var name = document.getElementById('modal_rent_details_service_' + numb);
                price.value = item['price'];
                name.value = item['name'];
                tax.value = item['vat'];
                amount.value = item['quantity'];
                total.value = item['price_full_price'];
                document.getElementById('modal_rent_details_tr_' + numb).dataset.id = item['id'];
                modal_details_rent.flag = 0;
                numb++;
            }

            modal_details_rent.bl.total_item_price();
        }

        // adding item to selected rent
        this.rent_item_add = async () => {

            var url = '/api/rents_items/add/' + modal_details_rent.rent_id;
            var response = await ajax.get(url);

            var item = {};

            item.name = document.querySelector('#modal_rent_details_service > button').innerText;
            item.price = modal_rent_details_item_price.value;
            item.quantity = modal_rent_details_item_amount.value;
            item.vat = modal_rent_details_item_tax.value;
            //var total = modal_rent_details_item_total.value;
            item.rent_item_id = response;
            item.rent_item_type = 'earning';
            item.rent_id = modal_details_rent.rent_id;
            item.currency_id = modal_details_rent.curreny_id;
            item.exchange = modal_details_rent.exchange;

            var url = '/api/rents_items/save';
            var response = await ajax.post_json(url, item);


            modal_details_rent.bl.rent_items_load();
        }

        this.load_date_add_guest_tab = () => {

            modal_add_guest_details_date_from.value = modal_details_rent.date_from;
            modal_add_guest_details_date_until.value = modal_details_rent.date_until;

        }

        // send confirmation mail to guest
        this.send_confirmation_mail = async () => {

            ui.content_loading('modal_rent_details_content_loading');
            var url = '/api/rents/send_email_confirmation/' + modal_details_rent.rent_id;
            await ajax.get(url);
            modal_details_rent.ui.load_emails();
            ui.content_loading_hide('modal_rent_details_content_loading');
        }

        // send voucher to guest
        this.send_voucher_mail = async () => {

            ui.content_loading('modal_rent_details_content_loading');
            var url = '/api/rents/send_email_voucher/' + modal_details_rent.rent_id;
            await ajax.get(url);
            modal_details_rent.ui.load_emails();
            ui.content_loading_hide('modal_rent_details_content_loading');

        }

        // send offer mail to guest
        this.send_offer_mail = async () => {

            ui.content_loading('modal_rent_details_content_loading');
            var url = '/api/rents/send_email_offer/' + modal_details_rent.rent_id;
            await ajax.get(url);
            modal_details_rent.ui.load_emails();
            ui.content_loading_hide('modal_rent_details_content_loading');

        }

        // Only dropdown
        this.only_dropdown = function (id) {
            var id = document.getElementById(id);
            var btn = id.getElementsByClassName("btn")[0];
            var dropdown = id.lastElementChild;
            btn.addEventListener("click", function () {
                dropdownToggle();
            });
            $(document).mouseup(function (e) {
                if (!$(dropdown).is(e.target) && $(dropdown).has(e.target).length === 0) {
                    dropdown.classList.add("hidden");
                    btn.classList.remove("open");
                }
            });
            function dropdownToggle() {
                if (!btn.classList.contains("open")) {
                    dropdown.classList.remove("hidden");
                    btn.classList.add("open");
                } else {
                    dropdown.classList.add("hidden");
                    btn.classList.remove("open");
                }
            }
            if (id.classList.contains("toggle")) {
                var dropdown_li = id.querySelectorAll(".dropdown_li");
                for (let i = 0; i < dropdown_li.length; i++) {
                    dropdown_li[i].addEventListener("click", function () {
                        dropdown.classList.add("hidden");
                        btn.classList.remove("open");
                    })
                }
            }
        }
    }

    modal_details_rent.load();

</script>